"use strict";(self.webpackChunkecommerce_app=self.webpackChunkecommerce_app||[]).push([[283],{6135:function(e,n,t){t.r(n),t.d(n,{default:function(){return N}});var r=t(9439),a=t(5861),o=t(1413),i=t(7757),c=t.n(i),s=t(2791),u=t(8953),l=t(577),p=(t(5462),t(5376)),d=t(618),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},m=t(1163),h=function(e,n){return s.createElement(m.Z,(0,d.Z)((0,d.Z)({},e),{},{ref:n,icon:f}))};h.displayName="MailOutlined";var x=s.forwardRef(h),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M881 442.4H519.7v148.5h206.4c-8.9 48-35.9 88.6-76.6 115.8-34.4 23-78.3 36.6-129.9 36.6-99.9 0-184.4-67.5-214.6-158.2-7.6-23-12-47.6-12-72.9s4.4-49.9 12-72.9c30.3-90.6 114.8-158.1 214.7-158.1 56.3 0 106.8 19.4 146.6 57.4l110-110.1c-66.5-62-153.2-100-256.6-100-149.9 0-279.6 86-342.7 211.4-26 51.8-40.8 110.4-40.8 172.4S151 632.8 177 684.6C240.1 810 369.8 896 519.7 896c103.6 0 190.4-34.4 253.8-93 72.5-66.8 114.4-165.2 114.4-282.1 0-27.2-2.4-53.3-6.9-78.5z"}}]},name:"google",theme:"outlined"},g=function(e,n){return s.createElement(m.Z,(0,d.Z)((0,d.Z)({},e),{},{ref:n,icon:v}))};g.displayName="GoogleOutlined";var w=s.forwardRef(g),y=t(4466),k=t(3504),Z=t(6871),b=t(4569),j=t.n(b),E=t(184),N=function(){var e=(0,Z.s0)(),n=function(n){var t=e.location.state;t?e(t.from):"admin"===n.data.role?e("/admin/dashboard"):e("/user/history")},t=(0,y.v9)((function(e){return(0,o.Z)({},e)})).user;(0,s.useEffect)((function(){t&&t.token&&e("/")}),[t,e]);var i=function(){var e=(0,a.Z)(c().mark((function e(n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j().post("http://localhost:8000/api/create-and-update-user",{},{headers:{authtoken:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),d=(0,s.useState)(""),f=(0,r.Z)(d,2),m=f[0],h=f[1],v=(0,s.useState)(""),g=(0,r.Z)(v,2),b=g[0],N=g[1],_=(0,y.I0)(),C=function(){var t=(0,a.Z)(c().mark((function t(r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u.I.signInWithPopup(u.q).then(function(){var t=(0,a.Z)(c().mark((function t(r){var a,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.user,t.next=3,a.getIdTokenResult();case 3:o=t.sent,i(o.token).then((function(t){_({type:"LOGGED_IN_USER",payload:{name:t.data.name,email:t.data.email,token:o.token,role:t.data.role,_id:t.data._id}}),e("/"),n(t)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e),l.Am.error(e.message)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(){var e=(0,a.Z)(c().mark((function e(t){var r,a,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.I.signInWithEmailAndPassword(m,b);case 3:return r=e.sent,a=r.user,e.next=7,a.getIdTokenResult();case 7:o=e.sent,i(o.token).then((function(e){_({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:o.token,role:e.data.role,_id:e.data._id}}),n(e)})).catch((function(e){return console.log(e)})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),l.Am.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(n){return e.apply(this,arguments)}}();return(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)("div",{className:"container p-5 ",style:{margin:"0px 400px 100px"},children:[(0,E.jsx)("h4",{children:"Login"}),(0,E.jsx)("div",{className:"row",children:(0,E.jsx)("div",{className:"col-mid-3 offset col-mid-6",children:(0,E.jsxs)("form",{onSubmit:I,children:[(0,E.jsx)("input",{type:"email",className:"form-control",style:{width:"600px",margin:"20px 0px 0px 0px"},value:m,onChange:function(e){h(e.target.value)},placeholder:"Your email",autoFocus:!0}),(0,E.jsx)("input",{type:"password",className:"form-control",style:{width:"600px",margin:"25px 0px 0px 0px"},value:b,onChange:function(e){N(e.target.value)},placeholder:"Your password"}),(0,E.jsx)(p.Z,{type:"primary",className:"mb-3",style:{width:"600px",margin:"30px 0px 0px 0px",display:"block"},shape:"round",size:"large",width:"600px",block:!0,icon:(0,E.jsx)(x,{}),disabled:!m||!b,onClick:I,children:"Log in with Email/Password"}),(0,E.jsx)(p.Z,{type:"danger",className:"mb-3",style:{width:"600px",margin:"25px 0px 0px 0px"},shape:"round",size:"large",width:"600px",block:!0,icon:(0,E.jsx)(w,{}),onClick:C,children:"Log in with Google"}),(0,E.jsxs)(p.Z,{type:"link",style:{display:"block",margin:"0px 0px 0px 450px"},children:[(0,E.jsx)(k.rU,{to:"/forgot/password"}),"Forgot password? "]})]})})})]})})}},2339:function(e,n,t){t.d(n,{l$:function(){return a},Tm:function(){return o}});var r=t(2791),a=r.isValidElement;function o(e,n){return function(e,n,t){return a(e)?r.cloneElement(e,"function"===typeof t?t(e.props||{}):t):n}(e,e,n)}},7521:function(e,n,t){t.d(n,{q:function(){return o}});var r=t(2791),a=r.createContext(void 0),o=function(e){var n=e.children,t=e.size;return r.createElement(a.Consumer,null,(function(e){return r.createElement(a.Provider,{value:t||e},n)}))};n.Z=a},4454:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(618);function a(e,n){var t=(0,r.Z)({},e);return Array.isArray(n)&&n.forEach((function(e){delete t[e]})),t}},5462:function(){}}]);
//# sourceMappingURL=283.b596a657.chunk.js.map