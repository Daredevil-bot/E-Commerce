{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\asus\\\\ecommerce project\\\\ecommerce\\\\ecommerce-app\\\\server\\\\Client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\toConsumableArray.js\";import _objectSpread from\"C:\\\\Users\\\\asus\\\\ecommerce project\\\\ecommerce\\\\ecommerce-app\\\\server\\\\Client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _slicedToArray from\"C:\\\\Users\\\\asus\\\\ecommerce project\\\\ecommerce\\\\ecommerce-app\\\\server\\\\Client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState,useEffect}from'react';import{getProdutByCount,fetchSearchFilter}from'../functions/product';import{useSelector,useDispatch}from'react-redux';import ProductCard from'../components/cards/ProductCard';import{Menu,Slider,Checkbox,Radio}from'antd';import{DollarOutlined,DownSquareOutlined}from'@ant-design/icons';import{getCategories}from'../functions/category';import{getSubs}from'../functions/sub';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Shop=function Shop(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState([0,0]),_useState6=_slicedToArray(_useState5,2),price=_useState6[0],setPrice=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),categories=_useState8[0],setCategories=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),categoriesId=_useState10[0],setCategoriesId=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),ok=_useState12[0],setOk=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),subs=_useState14[0],setSubs=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),sub=_useState16[0],setSub=_useState16[1];var _useState17=useState(['Apple','Lenovo','ASUS','Dell','HP','Microsoft','Samsung']),_useState18=_slicedToArray(_useState17,2),brands=_useState18[0],setBrands=_useState18[1];var _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),brand=_useState20[0],setBrand=_useState20[1];var _useState21=useState(['Black','Brown','Silver','White','Blue','Red']),_useState22=_slicedToArray(_useState21,2),colors=_useState22[0],setColors=_useState22[1];var _useState23=useState(''),_useState24=_slicedToArray(_useState23,2),color=_useState24[0],setColor=_useState24[1];var _useState25=useState(''),_useState26=_slicedToArray(_useState25,2),shipping=_useState26[0],setShipping=_useState26[1];var _useSelector=useSelector(function(state){return _objectSpread({},state);}),search=_useSelector.search;var text=search.text;var dispatch=useDispatch();useEffect(function(){loadProducts();getCategories().then(function(res){setCategories(res.data);console.log(res.data);});getSubs().then(function(res){return setSubs(res.data);});},[]);//    {for search query}\nuseEffect(function(){var delayed=setTimeout(function(){fetchProducts({query:text});if(!text){loadProducts();}},300);return function(){return clearTimeout(delayed);};},[text]);//    {default shop page}\nvar loadProducts=function loadProducts(){getProdutByCount(10).then(function(res){setLoading(true);setProducts(res.data);console.log(res.data);setLoading(false);});};//    {universal function for filter search }\nvar fetchProducts=function fetchProducts(arg){fetchSearchFilter(arg).then(function(res){setProducts(res.data);});};//    {for price filtering}\nuseEffect(function(){fetchProducts({price:price});},[ok]);var handleSlider=function handleSlider(value){dispatch({type:'SEARCH_QUERY',payload:{text:''}});setCategoriesId([]);setSub('');setPrice(value);setBrand('');setShipping('');setTimeout(function(){setOk(!ok);},300);};var handleClick=function handleClick(e){dispatch({type:'SEARCH_QUERY',payload:{text:''}});setPrice([0,0]);setSub('');setBrand('');setShipping('');var inTheState=_toConsumableArray(categoriesId);var justChecked=e.target.value;var foundInTheState=inTheState.indexOf(justChecked);if(foundInTheState===-1){inTheState.push(justChecked);}else{inTheState.splice(foundInTheState,1);}console.log(inTheState);setCategoriesId(inTheState);fetchProducts({category:inTheState});};var handleSubmit=function handleSubmit(sub){setSub(sub);setBrand('');setShipping('');dispatch({type:'SEARCH_QUERY',payload:{text:''}});setPrice([0,0]);setCategoriesId([]);fetchProducts({sub:sub});};var handleBrand=function handleBrand(e){setSub('');setShipping('');dispatch({type:'SEARCH_QUERY',payload:{text:''}});setPrice([0,0]);setCategoriesId([]);setBrand(e.target.value);fetchProducts({brand:e.target.value});};var handleColor=function handleColor(e){setSub('');dispatch({type:'SEARCH_QUERY',payload:{text:''}});setShipping('');setPrice([0,0]);setCategoriesId([]);setBrand('');setColor(e.target.value);fetchProducts({color:e.target.value});};var handleShipping=function handleShipping(e){setSub('');dispatch({type:'SEARCH_QUERY',payload:{text:''}});setPrice([0,0]);setCategoriesId([]);setBrand('');setColor('');setShipping(e.target.value);fetchProducts({shipping:e.target.value});};var SubMenu=Menu.SubMenu;return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-3\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Search/Filter\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(Menu,{defaultOpenKeys:['1','2','3','4','5','6'],mode:\"inline\",children:[/*#__PURE__*/_jsx(SubMenu,{title:/*#__PURE__*/_jsxs(\"span\",{className:\"h6\",children:[/*#__PURE__*/_jsx(DollarOutlined,{}),\" Price\"]}),children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Slider,{className:\"ml-4 mr-4\",tipFormatter:function tipFormatter(v){return\"Rs\".concat(v);},range:true,value:price,onChange:handleSlider,max:\"150000\"})})},'1'),/*#__PURE__*/_jsx(SubMenu,{title:/*#__PURE__*/_jsxs(\"span\",{className:\"h6\",children:[/*#__PURE__*/_jsx(DownSquareOutlined,{}),\" Catgories\"]}),children:/*#__PURE__*/_jsx(\"div\",{style:{margin:'10px'},children:categories.map(function(c){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Checkbox,{onChange:handleClick,className:\" m-1 pl-4 pr-4 pb-2 badge bg-light block\",value:c._id,name:\"category\",checked:categoriesId.includes(c._id),children:c.name})},c._id);})})},'2'),/*#__PURE__*/_jsx(SubMenu,{title:/*#__PURE__*/_jsxs(\"span\",{className:\"h6\",children:[/*#__PURE__*/_jsx(DownSquareOutlined,{}),\" Sub-Catgories\"]}),children:/*#__PURE__*/_jsx(\"div\",{children:subs.map(function(s){return/*#__PURE__*/_jsx(\"div\",{style:{margin:'10px'},children:/*#__PURE__*/_jsx(Checkbox,{onChange:function onChange(){return handleSubmit(s);},className:\" m-1 pl-4 pr-4 pb-2 badge bg-light block \",value:s._id,name:\"category\",children:s.name})},s._id);})})},'3'),/*#__PURE__*/_jsx(SubMenu,{title:/*#__PURE__*/_jsxs(\"span\",{className:\"h6\",children:[/*#__PURE__*/_jsx(DownSquareOutlined,{}),\" Brands\"]}),children:/*#__PURE__*/_jsx(\"div\",{children:brands.map(function(b){return/*#__PURE__*/_jsx(\"div\",{style:{margin:'10px'},children:/*#__PURE__*/_jsx(Radio,{onChange:handleBrand,className:\"  m-1 pl-4 pr-4 pb-2 badge bg-light block \",value:b,name:\"brand\",checked:b===brand,children:b})},b);})})},'4'),/*#__PURE__*/_jsx(SubMenu,{title:/*#__PURE__*/_jsxs(\"span\",{className:\"h6\",children:[/*#__PURE__*/_jsx(DownSquareOutlined,{}),\" Colors\"]}),children:/*#__PURE__*/_jsx(\"div\",{children:colors.map(function(c){return/*#__PURE__*/_jsx(\"div\",{style:{margin:'10px'},children:/*#__PURE__*/_jsx(Radio,{onChange:handleColor,className:\"  m-1 pl-6 pr-4 pb-2 badge bg-light block\",value:c,name:\"color\",checked:c===color,children:c})},c);})})},'5'),/*#__PURE__*/_jsxs(SubMenu,{title:/*#__PURE__*/_jsxs(\"span\",{className:\"h6\",children:[/*#__PURE__*/_jsx(DownSquareOutlined,{}),\" Shipping\"]}),children:[/*#__PURE__*/_jsx(Checkbox,{onChange:handleShipping,className:\" m-3 pl-4 pr-4 pb-2 badge bg-light block \",value:\"Yes\",checked:shipping==='Yes',children:\"Yes\"}),/*#__PURE__*/_jsx(Checkbox,{onChange:handleShipping,className:\" m-3 pl-4 pr-4 pb-2 badge bg-light  \",value:\"No\",checked:shipping==='No',children:\"No\"})]},'6')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-9\",children:[loading?/*#__PURE__*/_jsx(\"h4\",{className:\"text-danger\",children:\"Loading..\"}):/*#__PURE__*/_jsx(\"h4\",{className:\"text-danger\",children:\"Products\"}),products.length<1&&/*#__PURE__*/_jsx(\"p\",{children:\"No Products found\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:products.map(function(p){return/*#__PURE__*/_jsx(\"div\",{className:\"col-4 mt-5\",children:/*#__PURE__*/_jsx(ProductCard,{product:p})},p._id);})})]})]})});};export default Shop;","map":{"version":3,"sources":["C:/Users/asus/ecommerce project/ecommerce/ecommerce-app/server/client/src/pages/Shop.js"],"names":["React","useState","useEffect","getProdutByCount","fetchSearchFilter","useSelector","useDispatch","ProductCard","Menu","Slider","Checkbox","Radio","DollarOutlined","DownSquareOutlined","getCategories","getSubs","Shop","products","setProducts","loading","setLoading","price","setPrice","categories","setCategories","categoriesId","setCategoriesId","ok","setOk","subs","setSubs","sub","setSub","brands","setBrands","brand","setBrand","colors","setColors","color","setColor","shipping","setShipping","state","search","text","dispatch","loadProducts","then","res","data","console","log","delayed","setTimeout","fetchProducts","query","clearTimeout","arg","handleSlider","value","type","payload","handleClick","e","inTheState","justChecked","target","foundInTheState","indexOf","push","splice","category","handleSubmit","handleBrand","handleColor","handleShipping","SubMenu","v","margin","map","c","_id","includes","name","s","b","length","p"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { getProdutByCount, fetchSearchFilter } from '../functions/product'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport ProductCard from '../components/cards/ProductCard'\r\nimport { Menu, Slider, Checkbox ,Radio} from 'antd'\r\nimport { DollarOutlined, DownSquareOutlined } from '@ant-design/icons'\r\nimport { getCategories } from '../functions/category'\r\nimport { getSubs } from '../functions/sub'\r\n\r\nconst Shop = () => {\r\n    const [products, setProducts] = useState([])\r\n    const [loading, setLoading] = useState(false)\r\n    const [price, setPrice] = useState([0, 0])\r\n    const [categories, setCategories] = useState([])\r\n    const [categoriesId,setCategoriesId]=useState([])\r\n    const [ok, setOk] = useState(false)\r\n    const[subs,setSubs]=useState([])\r\n    const[sub,setSub]=useState('')\r\n    const[brands,setBrands]=useState(['Apple','Lenovo','ASUS','Dell','HP','Microsoft','Samsung'])\r\n    const[brand,setBrand]=useState('')\r\n    const[colors,setColors]=useState(['Black','Brown','Silver','White','Blue','Red'])\r\n    const[color,setColor]=useState('')\r\n    const[shipping,setShipping]=useState('')\r\n\r\n    const { search } = useSelector((state) => ({ ...state }))\r\n\r\n\r\n    const { text } = search\r\n    let dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        loadProducts()\r\n        getCategories()\r\n            .then(res => {\r\n                setCategories(res.data)\r\n                console.log(res.data)\r\n            })\r\n            getSubs().then(res=>setSubs(res.data))\r\n    }, [])\r\n    //    {for search query}\r\n    useEffect(() => {\r\n        const delayed = setTimeout(() => {\r\n            fetchProducts({ query: text })\r\n            if(!text){\r\n                loadProducts();\r\n            }\r\n\r\n        }, 300)\r\n        return () => clearTimeout(delayed)\r\n    }, [text])\r\n\r\n    //    {default shop page}\r\n    const loadProducts = () => {\r\n        getProdutByCount(10).then((res) => {\r\n            setLoading(true)\r\n\r\n            setProducts(res.data)\r\n            console.log(res.data)\r\n            setLoading(false)\r\n        })\r\n    }\r\n    //    {universal function for filter search }\r\n    const fetchProducts = (arg) => {\r\n        fetchSearchFilter(arg)\r\n            .then(res => {\r\n                setProducts(res.data)\r\n            })\r\n    }\r\n    //    {for price filtering}\r\n    useEffect(() => {\r\n        fetchProducts({ price });\r\n\r\n    }, [ok])\r\n    const handleSlider = (value) => {\r\n        dispatch({\r\n            type: 'SEARCH_QUERY',\r\n            payload: { text: '' }\r\n        })\r\n        setCategoriesId([])\r\n        setSub('')\r\n        setPrice(value)\r\n        setBrand('')\r\n        setShipping('')\r\n        setTimeout(() => {\r\n            setOk(!ok)\r\n        }, 300)\r\n    }\r\n    const handleClick=(e)=>{\r\n        dispatch({\r\n            type: 'SEARCH_QUERY',\r\n            payload: { text: '' }\r\n        })\r\n        setPrice([0,0])\r\n        setSub('')\r\n        setBrand('')\r\n        setShipping('')\r\n\r\n        let inTheState=[...categoriesId]\r\n        let justChecked=e.target.value\r\n        let foundInTheState=inTheState.indexOf(justChecked)\r\n\r\n\r\n        if(foundInTheState===-1){\r\n            inTheState.push(justChecked)\r\n        }\r\n        else{\r\n            inTheState.splice(foundInTheState,1)\r\n        }\r\n\r\n        console.log(inTheState)\r\n        setCategoriesId(inTheState)\r\n        fetchProducts({category:inTheState})\r\n    }\r\n\r\n    const handleSubmit=(sub)=>{\r\n        setSub(sub)\r\n        setBrand('')\r\n        setShipping('')\r\n\r\n        dispatch({\r\n            type: 'SEARCH_QUERY',\r\n            payload: { text: '' }\r\n        })\r\n        setPrice([0,0])\r\n        setCategoriesId([])\r\n        fetchProducts({sub})\r\n\r\n    }\r\n    const handleBrand=(e)=>{\r\n        setSub('')\r\n        setShipping('')\r\n\r\n        dispatch({\r\n            type: 'SEARCH_QUERY',\r\n            payload: { text: '' }\r\n        })\r\n        setPrice([0,0])\r\n        setCategoriesId([])\r\n        setBrand(e.target.value)\r\n        fetchProducts({brand:e.target.value})\r\n    }\r\n    const handleColor=(e)=>{\r\n        setSub('')\r\n        dispatch({\r\n            type: 'SEARCH_QUERY',\r\n            payload: { text: '' }\r\n        })\r\n        setShipping('')\r\n\r\n        setPrice([0,0])\r\n        setCategoriesId([])\r\n        setBrand('')\r\n        setColor(e.target.value)\r\n        fetchProducts({color:e.target.value})\r\n    }\r\n\r\n    const handleShipping=(e)=>{\r\n        setSub('')\r\n        dispatch({\r\n            type: 'SEARCH_QUERY',\r\n            payload: { text: '' }\r\n        })\r\n        setPrice([0,0])\r\n        setCategoriesId([])\r\n        setBrand('')\r\n        setColor('')\r\n        setShipping(e.target.value)\r\n        fetchProducts({shipping:e.target.value})\r\n    }\r\n\r\n    const { SubMenu } = Menu\r\n\r\n    return (\r\n        <div className='container-fluid'>\r\n            <div className='row'>\r\n                <div className='col-3'>\r\n                    <h4>Search/Filter</h4>\r\n                    <hr />\r\n                    <Menu defaultOpenKeys={['1', '2','3','4','5','6']} mode='inline'>\r\n                        <SubMenu key='1' title={<span className='h6'><DollarOutlined /> Price</span>}>\r\n                            <div>\r\n                                <Slider className='ml-4 mr-4'\r\n                                    tipFormatter={(v) => `Rs${v}`}\r\n                                    range\r\n                                    value={price}\r\n                                    onChange={handleSlider}\r\n                                    max='150000'\r\n                                />\r\n                            </div>\r\n                        </SubMenu>\r\n                        <SubMenu key='2' title={<span className='h6'><DownSquareOutlined /> Catgories</span>}>\r\n                            <div style={{ margin: '10px' }}>\r\n                                {categories.map((c) => (\r\n                                    <div key={c._id}>\r\n                                        <Checkbox onChange={handleClick} className=' m-1 pl-4 pr-4 pb-2 badge bg-light block' value={c._id} name='category' checked={categoriesId.includes(c._id)}>\r\n                                            {c.name}\r\n                                        </Checkbox>\r\n\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </SubMenu>\r\n                        <SubMenu key='3' title={<span className='h6'><DownSquareOutlined /> Sub-Catgories</span>}>\r\n                            <div >\r\n                                {subs.map((s) => (\r\n                                    <div key={s._id} style={{ margin: '10px' }}>\r\n                                        <Checkbox  onChange={()=>handleSubmit(s)} className=' m-1 pl-4 pr-4 pb-2 badge bg-light block ' value={s._id} name='category' >\r\n                                            {s.name}\r\n                                        </Checkbox>\r\n\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </SubMenu>\r\n                        <SubMenu key='4' title={<span className='h6'><DownSquareOutlined /> Brands</span>}>\r\n                            <div >\r\n                                {brands.map((b) => (\r\n                                    <div key={b} style={{ margin: '10px' }}>\r\n                                        <Radio  onChange={handleBrand} className='  m-1 pl-4 pr-4 pb-2 badge bg-light block ' value={b} name='brand' checked={b===brand} >\r\n                                            {b}\r\n                                        </Radio>\r\n\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </SubMenu>\r\n                        <SubMenu key='5' title={<span className='h6'><DownSquareOutlined /> Colors</span>}>\r\n                            <div >\r\n                                {colors.map((c) => (\r\n                                    <div key={c} style={{ margin: '10px' }}>\r\n                                        <Radio  onChange={handleColor} className='  m-1 pl-6 pr-4 pb-2 badge bg-light block' value={c} name='color' checked={c===color} >\r\n                                            {c}\r\n                                        </Radio>\r\n\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </SubMenu>\r\n                        <SubMenu key='6' title={<span className='h6'><DownSquareOutlined /> Shipping</span>}>\r\n                           \r\n                               <Checkbox onChange={handleShipping} className=' m-3 pl-4 pr-4 pb-2 badge bg-light block ' value=\"Yes\" checked={shipping==='Yes'} >\r\n                                            Yes\r\n\r\n                               </Checkbox>\r\n                               <Checkbox onChange={handleShipping} className=' m-3 pl-4 pr-4 pb-2 badge bg-light  ' value=\"No\" checked={shipping==='No'} >\r\n                                            No\r\n\r\n                               </Checkbox>\r\n                            \r\n                        </SubMenu>\r\n\r\n                    </Menu>\r\n\r\n                </div>\r\n                <div className='col-9'>\r\n                    {loading ? (<h4 className='text-danger'>Loading..</h4>) : (<h4 className='text-danger'>Products</h4>)}\r\n\r\n                    {products.length < 1 && <p>No Products found</p>}\r\n\r\n                    <div className='row'>\r\n                        {products.map((p) => (\r\n                            <div key={p._id} className='col-4 mt-5'>\r\n                                <ProductCard product={p} />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Shop"]},"metadata":{},"sourceType":"module"}