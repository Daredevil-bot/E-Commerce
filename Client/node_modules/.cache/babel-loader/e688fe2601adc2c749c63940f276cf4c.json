{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\asus\\\\ecommerce project\\\\ecommerce\\\\ecommerce-app\\\\src\\\\pages\\\\Shop.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { getProdutByCount, fetchSearchFilter } from '../functions/product';\nimport { useSelector, useDispatch } from 'react-redux';\nimport ProductCard from '../components/cards/ProductCard';\nimport { Menu, Slider, Checkbox, Radio } from 'antd';\nimport { DollarOutlined, DownSquareOutlined } from '@ant-design/icons';\nimport { getCategories } from '../functions/category';\nimport { getSubs } from '../functions/sub';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Shop = () => {\n  _s();\n\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [price, setPrice] = useState([0, 0]);\n  const [categories, setCategories] = useState([]);\n  const [categoriesId, setCategoriesId] = useState([]);\n  const [ok, setOk] = useState(false);\n  const [subs, setSubs] = useState([]);\n  const [sub, setSub] = useState('');\n  const [brands, setBrands] = useState(['Apple', 'Lenovo', 'ASUS', 'Dell', 'HP', 'Microsoft']);\n  const [brand, setBrand] = useState('');\n  const [colors, setColors] = useState(['Black', 'Brown', 'Silver', 'White', 'Blue', 'Red']);\n  const [color, setColor] = useState('');\n  const {\n    search\n  } = useSelector(state => ({ ...state\n  }));\n  const {\n    text\n  } = search;\n  let dispatch = useDispatch();\n  useEffect(() => {\n    loadProducts();\n    getCategories().then(res => {\n      setCategories(res.data);\n      console.log(res.data);\n    });\n    getSubs().then(res => setSubs(res.data));\n  }, []); //    {for search query}\n\n  useEffect(() => {\n    const delayed = setTimeout(() => {\n      fetchProducts({\n        query: text\n      });\n    }, 300);\n    return () => clearTimeout(delayed);\n  }, [text]); //    {default shop page}\n\n  const loadProducts = () => {\n    getProdutByCount(10).then(res => {\n      setLoading(true);\n      setProducts(res.data);\n      console.log(res.data);\n      setLoading(false);\n    });\n  }; //    {universal function for filter search }\n\n\n  const fetchProducts = arg => {\n    fetchSearchFilter(arg).then(res => {\n      setProducts(res.data);\n    });\n  }; //    {for price filtering}\n\n\n  useEffect(() => {\n    fetchProducts({\n      price\n    });\n  }, [ok]);\n\n  const handleSlider = value => {\n    dispatch({\n      type: 'SEARCH_QUERY',\n      payload: {\n        text: ''\n      }\n    });\n    setCategoriesId([]);\n    setSub('');\n    setPrice(value);\n    setBrand('');\n    setTimeout(() => {\n      setOk(!ok);\n    }, 300);\n  };\n\n  const handleClick = e => {\n    dispatch({\n      type: 'SEARCH_QUERY',\n      payload: {\n        text: ''\n      }\n    });\n    setPrice([0, 0]);\n    setSub('');\n    setBrand('');\n    let inTheState = [...categoriesId];\n    let justChecked = e.target.value;\n    let foundInTheState = inTheState.indexOf(justChecked);\n\n    if (foundInTheState === -1) {\n      inTheState.push(justChecked);\n    } else {\n      inTheState.splice(foundInTheState, 1);\n    }\n\n    console.log(inTheState);\n    setCategoriesId(inTheState);\n    fetchProducts({\n      category: inTheState\n    });\n  };\n\n  const handleSubmit = sub => {\n    setSub(sub);\n    setBrand('');\n    dispatch({\n      type: 'SEARCH_QUERY',\n      payload: {\n        text: ''\n      }\n    });\n    setPrice([0, 0]);\n    setCategoriesId([]);\n    fetchProducts({\n      sub\n    });\n  };\n\n  const handleBrand = e => {\n    setSub('');\n    dispatch({\n      type: 'SEARCH_QUERY',\n      payload: {\n        text: ''\n      }\n    });\n    setPrice([0, 0]);\n    setCategoriesId([]);\n    setBrand(e.target.value);\n    fetchProducts({\n      brand: e.target.value\n    });\n  };\n\n  const handleColor = e => {\n    setSub('');\n    dispatch({\n      type: 'SEARCH_QUERY',\n      payload: {\n        text: ''\n      }\n    });\n    setPrice([0, 0]);\n    setCategoriesId([]);\n    setBrand('');\n    setColor(e.target.value);\n    fetchProducts({\n      color: e.target.value\n    });\n  };\n\n  const {\n    SubMenu\n  } = Menu;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Search/Filter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Menu, {\n          defaultOpenKeys: ['1', '2', '3', '4', '5', '6'],\n          mode: \"inline\",\n          children: [/*#__PURE__*/_jsxDEV(SubMenu, {\n            title: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"h6\",\n              children: [/*#__PURE__*/_jsxDEV(DollarOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 70\n              }, this), \" Price\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 49\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(Slider, {\n                className: \"ml-4 mr-4\",\n                tipFormatter: v => `Rs${v}`,\n                range: true,\n                value: price,\n                onChange: handleSlider,\n                max: \"150000\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 29\n            }, this)\n          }, '1', false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(SubMenu, {\n            title: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"h6\",\n              children: [/*#__PURE__*/_jsxDEV(DownSquareOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 70\n              }, this), \" Catgories\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 49\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                margin: '10px'\n              },\n              children: categories.map(c => /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                  onChange: handleClick,\n                  className: \" m-1 pl-4 pr-4 pb-2 badge bg-light block\",\n                  value: c._id,\n                  name: \"category\",\n                  checked: categoriesId.includes(c._id),\n                  children: c.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 41\n                }, this)\n              }, c._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 37\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 29\n            }, this)\n          }, '2', false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(SubMenu, {\n            title: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"h6\",\n              children: [/*#__PURE__*/_jsxDEV(DownSquareOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 70\n              }, this), \" Sub-Catgories\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 49\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: subs.map(s => /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                  onChange: () => handleSubmit(s),\n                  className: \" m-1 pl-4 pr-4 pb-2 badge bg-light block \",\n                  value: s._id,\n                  name: \"category\",\n                  children: s.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 41\n                }, this)\n              }, s._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 37\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 29\n            }, this)\n          }, '3', false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(SubMenu, {\n            title: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"h6\",\n              children: [/*#__PURE__*/_jsxDEV(DownSquareOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 70\n              }, this), \" Brands\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 49\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: brands.map(b => /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(Radio, {\n                  onChange: handleBrand,\n                  className: \"  m-1 pl-4 pr-4 pb-2 badge bg-light block \",\n                  value: b,\n                  name: \"brand\",\n                  checked: b === brand,\n                  children: b\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 190,\n                  columnNumber: 41\n                }, this)\n              }, b, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 37\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 29\n            }, this)\n          }, '4', false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(SubMenu, {\n            title: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"h6\",\n              children: [/*#__PURE__*/_jsxDEV(DownSquareOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 70\n              }, this), \" Colors\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 49\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: colors.map(c => /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(Radio, {\n                  onChange: handleColor,\n                  className: \"  m-1 pl-6 pr-4 pb-2 badge bg-light block\",\n                  value: c,\n                  name: \"color\",\n                  checked: c === color,\n                  children: c\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 41\n                }, this)\n              }, c, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 37\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 29\n            }, this)\n          }, '5', false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-9\",\n        children: [loading ? /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-danger\",\n          children: \"Loading..\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 33\n        }, this) : /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-danger\",\n          children: \"Products\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 80\n        }, this), products.length < 1 && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No Products found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 45\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: products.map(p => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-4 mt-5\",\n            children: /*#__PURE__*/_jsxDEV(ProductCard, {\n              product: p\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 33\n            }, this)\n          }, p._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 145,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Shop, \"hhKGzofdGnp0jy0Ur0X7xCnOMDA=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = Shop;\nexport default Shop;\n\nvar _c;\n\n$RefreshReg$(_c, \"Shop\");","map":{"version":3,"sources":["C:/Users/asus/ecommerce project/ecommerce/ecommerce-app/src/pages/Shop.js"],"names":["React","useState","useEffect","getProdutByCount","fetchSearchFilter","useSelector","useDispatch","ProductCard","Menu","Slider","Checkbox","Radio","DollarOutlined","DownSquareOutlined","getCategories","getSubs","Shop","products","setProducts","loading","setLoading","price","setPrice","categories","setCategories","categoriesId","setCategoriesId","ok","setOk","subs","setSubs","sub","setSub","brands","setBrands","brand","setBrand","colors","setColors","color","setColor","search","state","text","dispatch","loadProducts","then","res","data","console","log","delayed","setTimeout","fetchProducts","query","clearTimeout","arg","handleSlider","value","type","payload","handleClick","e","inTheState","justChecked","target","foundInTheState","indexOf","push","splice","category","handleSubmit","handleBrand","handleColor","SubMenu","v","margin","map","c","_id","includes","name","s","b","length","p"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { getProdutByCount, fetchSearchFilter } from '../functions/product'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport ProductCard from '../components/cards/ProductCard'\r\nimport { Menu, Slider, Checkbox ,Radio} from 'antd'\r\nimport { DollarOutlined, DownSquareOutlined } from '@ant-design/icons'\r\nimport { getCategories } from '../functions/category'\r\nimport { getSubs } from '../functions/sub'\r\n\r\nconst Shop = () => {\r\n    const [products, setProducts] = useState([])\r\n    const [loading, setLoading] = useState(false)\r\n    const [price, setPrice] = useState([0, 0])\r\n    const [categories, setCategories] = useState([])\r\n    const [categoriesId,setCategoriesId]=useState([])\r\n    const [ok, setOk] = useState(false)\r\n    const[subs,setSubs]=useState([])\r\n    const[sub,setSub]=useState('')\r\n    const[brands,setBrands]=useState(['Apple','Lenovo','ASUS','Dell','HP','Microsoft'])\r\n    const[brand,setBrand]=useState('')\r\n    const[colors,setColors]=useState(['Black','Brown','Silver','White','Blue','Red'])\r\n    const[color,setColor]=useState('')\r\n\r\n    const { search } = useSelector((state) => ({ ...state }))\r\n\r\n\r\n    const { text } = search\r\n    let dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        loadProducts()\r\n        getCategories()\r\n            .then(res => {\r\n                setCategories(res.data)\r\n                console.log(res.data)\r\n            })\r\n            getSubs().then(res=>setSubs(res.data))\r\n    }, [])\r\n    //    {for search query}\r\n    useEffect(() => {\r\n        const delayed = setTimeout(() => {\r\n            fetchProducts({ query: text })\r\n        }, 300)\r\n        return () => clearTimeout(delayed)\r\n    }, [text])\r\n\r\n    //    {default shop page}\r\n    const loadProducts = () => {\r\n        getProdutByCount(10).then((res) => {\r\n            setLoading(true)\r\n\r\n            setProducts(res.data)\r\n            console.log(res.data)\r\n            setLoading(false)\r\n        })\r\n    }\r\n    //    {universal function for filter search }\r\n    const fetchProducts = (arg) => {\r\n        fetchSearchFilter(arg)\r\n            .then(res => {\r\n                setProducts(res.data)\r\n            })\r\n    }\r\n    //    {for price filtering}\r\n    useEffect(() => {\r\n        fetchProducts({ price });\r\n\r\n    }, [ok])\r\n    const handleSlider = (value) => {\r\n        dispatch({\r\n            type: 'SEARCH_QUERY',\r\n            payload: { text: '' }\r\n        })\r\n        setCategoriesId([])\r\n        setSub('')\r\n        setPrice(value)\r\n        setBrand('')\r\n        setTimeout(() => {\r\n            setOk(!ok)\r\n        }, 300)\r\n    }\r\n    const handleClick=(e)=>{\r\n        dispatch({\r\n            type: 'SEARCH_QUERY',\r\n            payload: { text: '' }\r\n        })\r\n        setPrice([0,0])\r\n        setSub('')\r\n        setBrand('')\r\n        let inTheState=[...categoriesId]\r\n        let justChecked=e.target.value\r\n        let foundInTheState=inTheState.indexOf(justChecked)\r\n\r\n\r\n        if(foundInTheState===-1){\r\n            inTheState.push(justChecked)\r\n        }\r\n        else{\r\n            inTheState.splice(foundInTheState,1)\r\n        }\r\n\r\n        console.log(inTheState)\r\n        setCategoriesId(inTheState)\r\n        fetchProducts({category:inTheState})\r\n    }\r\n\r\n    const handleSubmit=(sub)=>{\r\n        setSub(sub)\r\n        setBrand('')\r\n        dispatch({\r\n            type: 'SEARCH_QUERY',\r\n            payload: { text: '' }\r\n        })\r\n        setPrice([0,0])\r\n        setCategoriesId([])\r\n        fetchProducts({sub})\r\n\r\n    }\r\n    const handleBrand=(e)=>{\r\n        setSub('')\r\n        dispatch({\r\n            type: 'SEARCH_QUERY',\r\n            payload: { text: '' }\r\n        })\r\n        setPrice([0,0])\r\n        setCategoriesId([])\r\n        setBrand(e.target.value)\r\n        fetchProducts({brand:e.target.value})\r\n    }\r\n    const handleColor=(e)=>{\r\n        setSub('')\r\n        dispatch({\r\n            type: 'SEARCH_QUERY',\r\n            payload: { text: '' }\r\n        })\r\n        setPrice([0,0])\r\n        setCategoriesId([])\r\n        setBrand('')\r\n        setColor(e.target.value)\r\n        fetchProducts({color:e.target.value})\r\n    }\r\n    const { SubMenu } = Menu\r\n\r\n    return (\r\n        <div className='container-fluid'>\r\n            <div className='row'>\r\n                <div className='col-3'>\r\n                    <h4>Search/Filter</h4>\r\n                    <hr />\r\n                    <Menu defaultOpenKeys={['1', '2','3','4','5','6']} mode='inline'>\r\n                        <SubMenu key='1' title={<span className='h6'><DollarOutlined /> Price</span>}>\r\n                            <div>\r\n                                <Slider className='ml-4 mr-4'\r\n                                    tipFormatter={(v) => `Rs${v}`}\r\n                                    range\r\n                                    value={price}\r\n                                    onChange={handleSlider}\r\n                                    max='150000'\r\n                                />\r\n                            </div>\r\n                        </SubMenu>\r\n                        <SubMenu key='2' title={<span className='h6'><DownSquareOutlined /> Catgories</span>}>\r\n                            <div style={{ margin: '10px' }}>\r\n                                {categories.map((c) => (\r\n                                    <div key={c._id}>\r\n                                        <Checkbox onChange={handleClick} className=' m-1 pl-4 pr-4 pb-2 badge bg-light block' value={c._id} name='category' checked={categoriesId.includes(c._id)}>\r\n                                            {c.name}\r\n                                        </Checkbox>\r\n\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </SubMenu>\r\n                        <SubMenu key='3' title={<span className='h6'><DownSquareOutlined /> Sub-Catgories</span>}>\r\n                            <div >\r\n                                {subs.map((s) => (\r\n                                    <div key={s._id}>\r\n                                        <Checkbox  onChange={()=>handleSubmit(s)} className=' m-1 pl-4 pr-4 pb-2 badge bg-light block ' value={s._id} name='category' >\r\n                                            {s.name}\r\n                                        </Checkbox>\r\n\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </SubMenu>\r\n                        <SubMenu key='4' title={<span className='h6'><DownSquareOutlined /> Brands</span>}>\r\n                            <div >\r\n                                {brands.map((b) => (\r\n                                    <div key={b}>\r\n                                        <Radio  onChange={handleBrand} className='  m-1 pl-4 pr-4 pb-2 badge bg-light block ' value={b} name='brand' checked={b===brand} >\r\n                                            {b}\r\n                                        </Radio>\r\n\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </SubMenu>\r\n                        <SubMenu key='5' title={<span className='h6'><DownSquareOutlined /> Colors</span>}>\r\n                            <div >\r\n                                {colors.map((c) => (\r\n                                    <div key={c}>\r\n                                        <Radio  onChange={handleColor} className='  m-1 pl-6 pr-4 pb-2 badge bg-light block' value={c} name='color' checked={c===color} >\r\n                                            {c}\r\n                                        </Radio>\r\n\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </SubMenu>\r\n\r\n                    </Menu>\r\n\r\n                </div>\r\n                <div className='col-9'>\r\n                    {loading ? (<h4 className='text-danger'>Loading..</h4>) : (<h4 className='text-danger'>Products</h4>)}\r\n\r\n                    {products.length < 1 && <p>No Products found</p>}\r\n\r\n                    <div className='row'>\r\n                        {products.map((p) => (\r\n                            <div key={p._id} className='col-4 mt-5'>\r\n                                <ProductCard product={p} />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Shop"]},"metadata":{},"sourceType":"module"}