{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\asus\\\\ecommerce project\\\\ecommerce\\\\ecommerce-app\\\\server\\\\Client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _objectSpread from\"C:\\\\Users\\\\asus\\\\ecommerce project\\\\ecommerce\\\\ecommerce-app\\\\server\\\\Client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _slicedToArray from\"C:\\\\Users\\\\asus\\\\ecommerce project\\\\ecommerce\\\\ecommerce-app\\\\server\\\\Client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\asus\\\\ecommerce project\\\\ecommerce\\\\ecommerce-app\\\\server\\\\Client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React from'react';import{useState,useEffect}from'react';import{useSelector}from'react-redux';import{createCategory,getCategories,deleteCategory}from'../../../functions/category';import{toast}from'react-toastify';import{DeleteOutlined,EditOutlined}from'@ant-design/icons';import AdminNav from'../../../components/nav/AdminNav';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreateCategory=function CreateCategory(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setname=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),categories=_useState4[0],setcategories=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),keyword=_useState6[0],setkeyword=_useState6[1];var _useSelector=useSelector(function(state){return _objectSpread({},state);}),user=_useSelector.user;useEffect(function(){listCategory();},[]);var listCategory=function listCategory(){return getCategories().then(function(res){return setcategories(res.data);}).catch(function(err){return console.log(err);});};var handleClick=function handleClick(e){e.preventDefault();console.log(\"clicked\");createCategory({name:name},user.token).then(function(e){toast.success('Category created');}).catch(function(err){if(err.response.status===400)toast.error(err.response.data);console.log(err);});};var handleDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(slug){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(window.confirm('Delete?')){deleteCategory(slug,user.token).then(function(e){toast.error(\"\".concat(e.data.name,\" Deleted succesfully refresh page to see changes\"));}).catch(function(err){if(err.response.status===400){toast.error(err.response.data);}});}case 1:case\"end\":return _context.stop();}}},_callee);}));return function handleDelete(_x){return _ref.apply(this,arguments);};}();var handleSearch=function handleSearch(e){e.preventDefault();setkeyword(e.target.value.toLowerCase());};var searched=function searched(keyword){return function(c){return c.name.toLowerCase().includes(keyword);};};return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(AdminNav,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-10\",style:{margin:'0px 0px 0px 0px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Create Category\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleClick,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",onChange:function onChange(e){return setname(e.target.value);},value:name,autoFocus:true,required:true,placeholder:\"Enter name of category\",style:{margin:'0px 0px 0px 0px',width:'1000px'}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",value:\"submit\",className:\"btn btn-primary\",style:{margin:'20px 0px 0px 0px'},children:\"Save\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:keyword,className:\"form-control\",onChange:handleSearch,style:{margin:'20px 0px 0px 0px',width:'1000px'}})]}),/*#__PURE__*/_jsx(\"div\",{children:categories.filter(searched(keyword)).map(function(c){return/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-secondary\",style:{margin:'10px 0px 0px 0px',width:'1000px'},children:[c.name,/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return handleDelete(c.slug);},className:\"btn btn-sm  float-end text-warning\",children:/*#__PURE__*/_jsx(DeleteOutlined,{})}),/*#__PURE__*/_jsx(\"span\",{className:\"btn btn-sm  float-end \",children:/*#__PURE__*/_jsx(Link,{to:\"/admin/category/\".concat(c.slug),children:/*#__PURE__*/_jsx(EditOutlined,{})})})]},c._id);})})]})]})});};export default CreateCategory;","map":{"version":3,"sources":["C:/Users/asus/ecommerce project/ecommerce/ecommerce-app/server/client/src/pages/admin/category/CreateCategory.js"],"names":["React","useState","useEffect","useSelector","createCategory","getCategories","deleteCategory","toast","DeleteOutlined","EditOutlined","AdminNav","Link","CreateCategory","name","setname","categories","setcategories","keyword","setkeyword","state","user","listCategory","then","res","data","catch","err","console","log","handleClick","e","preventDefault","token","success","response","status","error","handleDelete","slug","window","confirm","handleSearch","target","value","toLowerCase","searched","c","includes","margin","width","filter","map","_id"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { useState,useEffect } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { createCategory,getCategories,deleteCategory } from '../../../functions/category'\r\nimport { toast } from 'react-toastify'\r\nimport { DeleteOutlined ,EditOutlined } from '@ant-design/icons';\r\n\r\nimport AdminNav from '../../../components/nav/AdminNav'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst CreateCategory = () => {\r\n    const[name,setname]=useState('')\r\n    const[categories,setcategories]=useState([]);\r\n    const[keyword,setkeyword]=useState('');\r\n   \r\n    const {user}=useSelector(state=>({...state}))\r\n    useEffect(()=>{\r\n        listCategory()\r\n    },[])\r\n\r\n     const listCategory=()=>getCategories()\r\n     .then((res)=>setcategories(res.data))\r\n     .catch(err=>console.log(err))\r\n     \r\n    const handleClick=(e)=>{\r\n        e.preventDefault()\r\n        console.log(\"clicked\")\r\n        createCategory({name},user.token)\r\n        .then((e)=>{\r\n            \r\n            toast.success('Category created')\r\n        })\r\n        .catch(err=>{\r\n            if(err.response.status===400) toast.error(err.response.data)\r\n            console.log(err)\r\n        })\r\n            \r\n    \r\n\r\n    }\r\n    const handleDelete= async (slug)=>{\r\n        if(window.confirm('Delete?')){\r\n            deleteCategory(slug,user.token)\r\n            .then((e)=>{\r\n                toast.error(`${e.data.name} Deleted succesfully refresh page to see changes`)\r\n            })\r\n            .catch(err=>{\r\n                if(err.response.status===400){\r\n                    toast.error(err.response.data)\r\n                }\r\n            })\r\n        }\r\n    }\r\n    const handleSearch=(e)=>{\r\n        e.preventDefault()\r\n        setkeyword(e.target.value.toLowerCase())\r\n    }\r\n     const searched=(keyword)=>(c)=> c.name.toLowerCase().includes(keyword)\r\n\r\n     \r\n     \r\n    \r\n        return (\r\n        <div className='container-fluid' >\r\n            <div className='row'>\r\n            <div className='col'>\r\n                    <AdminNav/>\r\n                </div>\r\n                \r\n                <div className='col-10'  style={\r\n                    {margin: '0px 0px 0px 0px'}\r\n                }>\r\n                   \r\n                <div className='col' ><h2>Create Category</h2></div>\r\n                  <form onSubmit={handleClick}>\r\n                      <input type=\"text\" \r\n                      className='form-control'\r\n                      onChange={(e)=>setname(e.target.value)}\r\n                      value={name}\r\n                      autoFocus\r\n                      required\r\n                      \r\n                      placeholder='Enter name of category'\r\n                      style={{margin:'0px 0px 0px 0px',width:'1000px'}}>\r\n                        \r\n                        \r\n                      </input>\r\n                      <button type='submit' value=\"submit\"className='btn btn-primary' style={{margin:'20px 0px 0px 0px'}}>Save</button>\r\n                      <input type='text' value={keyword} className='form-control' onChange={handleSearch} style={{margin:'20px 0px 0px 0px',width:'1000px'}}></input>\r\n                  </form>\r\n                  <div >{categories.filter(searched(keyword)).map((c)=>(\r\n                <div className='alert alert-secondary' style={{margin:'10px 0px 0px 0px',width:'1000px'}} key={c._id} >\r\n                    {c.name}\r\n                    <span onClick={()=>handleDelete(c.slug)} className='btn btn-sm  float-end text-warning' >\r\n                       <DeleteOutlined/>\r\n                    </span>\r\n                    <span className='btn btn-sm  float-end ' >\r\n                       <Link to={`/admin/category/${c.slug}`}><EditOutlined/></Link>\r\n                    </span>\r\n\r\n                </div>\r\n\r\n            )\r\n\r\n            )}\r\n            </div>\r\n                 \r\n                </div>\r\n                \r\n                \r\n                \r\n            </div>\r\n            \r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default CreateCategory\r\n\r\n"]},"metadata":{},"sourceType":"module"}