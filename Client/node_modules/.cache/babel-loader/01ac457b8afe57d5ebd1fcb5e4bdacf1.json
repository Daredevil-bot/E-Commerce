{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\asus\\\\ecommerce project\\\\ecommerce\\\\ecommerce-app\\\\server\\\\Client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _slicedToArray from\"C:\\\\Users\\\\asus\\\\ecommerce project\\\\ecommerce\\\\ecommerce-app\\\\server\\\\Client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React from'react';import{useState,useEffect}from'react';import{useSelector}from'react-redux';import{getCategories,getCategory,updateCategory}from'../../../functions/category';import{toast}from'react-toastify';import{useParams}from'react-router-dom';import AdminNav from'../../../components/nav/AdminNav';import{useNavigate}from'react-router-dom';import{getSubs,getSub}from'../../../functions/sub';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdateSub=function UpdateSub(){var _useParams=useParams(),slug=_useParams.slug;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setname=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),categories=_useState4[0],setcategories=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),category=_useState6[0],setcategory=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),subs=_useState8[0],setsubs=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),parent=_useState10[0],setparent=_useState10[1];var navigate=useNavigate();var _useSelector=useSelector(function(state){return _objectSpread({},state);}),user=_useSelector.user;useEffect(function(){// loadCategory()\nloadsub();//this will load all the subs \nloadCategories();//this will load all the categories\n},[]);var loadCategories=function loadCategories(){return getCategories().then(function(res){return setcategories(res.data);}).catch(function(err){return console.log(err);});};var loadsub=function loadsub(){return getSub(slug).then(function(res){setname(res.data.name);}).catch(function(err){return console.log(err);});};var handleClick=function handleClick(e){e.preventDefault();console.log(\"clicked\");updateCategory(slug,{name:name,parent:category},user.token).then(function(e){toast.success('Sub Category update');navigate('/admin/category');}).catch(function(err){if(err.response.status===400)toast.error(err.response.data);console.log(err);});};// const handleDelete= async (slug)=>{\n//     if(window.confirm('Delete?')){\n//         deleteCategory(slug,user.token)\n//         .then((e)=>{\n//             toast.error(`${e.data.name} Deleted succesfully refresh page to see changes`)\n//         })\n//         .catch(err=>{\n//             if(err.response.status===400){\n//                 toast.error(err.response.data)\n//             }\n//         })\n//     }\n// }\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(AdminNav,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-10\",style:{margin:'0px 0px 0px 00px'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Parent Category\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",style:{width:'1000px'},placeholder:\"Select name of parent category\",onChange:function onChange(e){return setcategory(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{children:\"Please select\"}),categories.length>0&&categories.map(function(s){return/*#__PURE__*/_jsx(\"option\",{value:s._id,selected:s._id===category,children:s.name},s._id);})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",style:{margin:\"20px 0px 0px 0px\"},children:/*#__PURE__*/_jsx(\"h3\",{children:\"Update Sub-Category\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleClick,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:name,autoFocus:true,required:true,onChange:function onChange(e){setname(e.target.value);},placeholder:\"Enter name of category\",style:{margin:'20px 0px 0px 0px',width:'1000px'}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",value:\"submit\",className:\"btn btn-primary\",style:{margin:'20px 0px 0px 0px'},children:\"Save\"})]})]})]})});};export default UpdateSub;","map":{"version":3,"sources":["C:/Users/asus/ecommerce project/ecommerce/ecommerce-app/server/Client/src/pages/admin/sub/UpdateSub.js"],"names":["React","useState","useEffect","useSelector","getCategories","getCategory","updateCategory","toast","useParams","AdminNav","useNavigate","getSubs","getSub","UpdateSub","slug","name","setname","categories","setcategories","category","setcategory","subs","setsubs","parent","setparent","navigate","state","user","loadsub","loadCategories","then","res","data","catch","err","console","log","handleClick","e","preventDefault","token","success","response","status","error","margin","width","target","value","length","map","s","_id"],"mappings":"+UAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,CAAkBC,SAAlB,KAAmC,OAAnC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,aAAT,CAAwBC,WAAxB,CAAoCC,cAApC,KAA0D,6BAA1D,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,MAAOC,CAAAA,QAAP,KAAqB,kCAArB,CAEA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,OAAT,CAAiBC,MAAjB,KAA+B,wBAA/B,C,wFAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACpB,eAAYL,SAAS,EAArB,CAAMM,IAAN,YAAMA,IAAN,CACA,cAAoBb,QAAQ,CAAC,EAAD,CAA5B,wCAAMc,IAAN,eAAWC,OAAX,eACA,eAAiCf,QAAQ,CAAC,EAAD,CAAzC,yCAAOgB,UAAP,eAAkBC,aAAlB,eACA,eAA4BjB,QAAQ,CAAC,EAAD,CAApC,yCAAMkB,QAAN,eAAeC,WAAf,eACA,eAAqBnB,QAAQ,CAAC,EAAD,CAA7B,yCAAOoB,IAAP,eAAYC,OAAZ,eACA,eAAwBrB,QAAQ,CAAC,EAAD,CAAhC,0CAAMsB,MAAN,gBAAaC,SAAb,gBACD,GAAMC,CAAAA,QAAQ,CAACf,WAAW,EAA1B,CACC,iBAAaP,WAAW,CAAC,SAAAuB,KAAK,0BAAOA,KAAP,GAAN,CAAxB,CAAOC,IAAP,cAAOA,IAAP,CACAzB,SAAS,CAAC,UAAI,CACV;AACA0B,OAAO,GAAwB;AAC/BC,cAAc,GAAkB;AACnC,CAJQ,CAIP,EAJO,CAAT,CAKA,GAAMA,CAAAA,cAAc,CAAC,QAAfA,CAAAA,cAAe,SAAIzB,CAAAA,aAAa,GACpC0B,IADuB,CAClB,SAACC,GAAD,QAAOb,CAAAA,aAAa,CAACa,GAAG,CAACC,IAAL,CAApB,EADkB,EAEvBC,KAFuB,CAEjB,SAAAC,GAAG,QAAEC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAF,EAFc,CAAJ,EAArB,CAIC,GAAMN,CAAAA,OAAO,CAAC,QAARA,CAAAA,OAAQ,SAAIhB,CAAAA,MAAM,CAACE,IAAD,CAAN,CACjBgB,IADiB,CACZ,SAACC,GAAD,CAAO,CAACf,OAAO,CAACe,GAAG,CAACC,IAAJ,CAASjB,IAAV,CAAP,CACV,CAFc,EAGjBkB,KAHiB,CAGX,SAAAC,GAAG,QAAEC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAF,EAHQ,CAAJ,EAAd,CAKD,GAAMG,CAAAA,WAAW,CAAC,QAAZA,CAAAA,WAAY,CAACC,CAAD,CAAK,CACnBA,CAAC,CAACC,cAAF,GACAJ,OAAO,CAACC,GAAR,CAAY,SAAZ,EACA9B,cAAc,CAACQ,IAAD,CAAM,CAACC,IAAI,CAAJA,IAAD,CAAMQ,MAAM,CAACJ,QAAb,CAAN,CAA6BQ,IAAI,CAACa,KAAlC,CAAd,CACCV,IADD,CACM,SAACQ,CAAD,CAAK,CAEP/B,KAAK,CAACkC,OAAN,CAAc,qBAAd,EACAhB,QAAQ,CAAC,iBAAD,CAAR,CACH,CALD,EAMCQ,KAND,CAMO,SAAAC,GAAG,CAAE,CACR,GAAGA,GAAG,CAACQ,QAAJ,CAAaC,MAAb,GAAsB,GAAzB,CAA8BpC,KAAK,CAACqC,KAAN,CAAYV,GAAG,CAACQ,QAAJ,CAAaV,IAAzB,EAC9BG,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACH,CATD,EAaH,CAhBD,CAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAII,mBACA,YAAK,SAAS,CAAC,iBAAf,uBACI,aAAK,SAAS,CAAC,KAAf,wBACA,YAAK,SAAS,CAAC,KAAf,uBACQ,KAAC,QAAD,IADR,EADA,cAII,aAAK,SAAS,CAAC,QAAf,CAAyB,KAAK,CAC1B,CAACW,MAAM,CAAE,kBAAT,CADJ,wBAGG,uCAHH,cAIM,gBAAQ,SAAS,CAAC,cAAlB,CAAiC,KAAK,CAAE,CAACC,KAAK,CAAC,QAAP,CAAxC,CAA0D,WAAW,CAAC,gCAAtE,CAAuG,QAAQ,CAAE,kBAACR,CAAD,QAAKlB,CAAAA,WAAW,CAACkB,CAAC,CAACS,MAAF,CAASC,KAAV,CAAhB,EAAjH,wBACI,yCADJ,CAEK/B,UAAU,CAACgC,MAAX,CAAmB,CAAnB,EAAwBhC,UAAU,CAACiC,GAAX,CAAe,SAACC,CAAD,qBACpC,eAAoB,KAAK,CAAEA,CAAC,CAACC,GAA7B,CAAkC,QAAQ,CAAED,CAAC,CAACC,GAAF,GAAQjC,QAApD,UACKgC,CAAC,CAACpC,IADP,EAAaoC,CAAC,CAACC,GAAf,CADoC,EAAf,CAF7B,GAJN,cAcA,YAAK,SAAS,CAAC,KAAf,CAAsB,KAAK,CAAE,CAACP,MAAM,CAAC,kBAAR,CAA7B,uBAA0D,2CAA1D,EAdA,cAeE,cAAM,QAAQ,CAAER,WAAhB,wBACI,cAAO,IAAI,CAAC,MAAZ,CACA,SAAS,CAAC,cADV,CAGA,KAAK,CAAEtB,IAHP,CAIA,SAAS,KAJT,CAKA,QAAQ,KALR,CAMA,QAAQ,CAAE,kBAACuB,CAAD,CAAK,CAACtB,OAAO,CAACsB,CAAC,CAACS,MAAF,CAASC,KAAV,CAAP,CAAwB,CANxC,CAOA,WAAW,CAAC,wBAPZ,CAQA,KAAK,CAAE,CAACH,MAAM,CAAC,kBAAR,CAA2BC,KAAK,CAAC,QAAjC,CARP,EADJ,cAaI,eAAQ,IAAI,CAAC,QAAb,CAAsB,KAAK,CAAC,QAA5B,CAAoC,SAAS,CAAC,iBAA9C,CAAgE,KAAK,CAAE,CAACD,MAAM,CAAC,kBAAR,CAAvE,kBAbJ,GAfF,GAJJ,GADJ,EADA,CAgDP,CAxGD,CA0GA,cAAehC,CAAAA,SAAf","sourcesContent":["import React from 'react'\r\nimport { useState,useEffect } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { getCategories, getCategory,updateCategory } from '../../../functions/category'\r\nimport { toast } from 'react-toastify'\r\nimport { useParams } from 'react-router-dom'\r\nimport AdminNav from '../../../components/nav/AdminNav'\r\n\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { getSubs,getSub } from '../../../functions/sub'\r\n\r\nconst UpdateSub = () => {\r\n    const{slug}=useParams()\r\n    const[name,setname]=useState('')\r\n    const [categories,setcategories]=useState([])\r\n    const[category,setcategory]=useState('')\r\n    const [subs,setsubs]=useState([])\r\n    const[parent,setparent]=useState('')\r\n   const navigate=useNavigate()\r\n    const {user}=useSelector(state=>({...state}))\r\n    useEffect(()=>{\r\n        // loadCategory()\r\n        loadsub()                      //this will load all the subs \r\n        loadCategories()                //this will load all the categories\r\n    },[])\r\n    const loadCategories=()=>getCategories()\r\n     .then((res)=>setcategories(res.data))\r\n     .catch(err=>console.log(err))\r\n\r\n     const loadsub=()=>getSub(slug)\r\n     .then((res)=>{setname(res.data.name)\r\n        })\r\n     .catch(err=>console.log(err))\r\n     \r\n    const handleClick=(e)=>{\r\n        e.preventDefault()\r\n        console.log(\"clicked\")\r\n        updateCategory(slug,{name,parent:category},user.token)\r\n        .then((e)=>{\r\n            \r\n            toast.success('Sub Category update')\r\n            navigate('/admin/category')\r\n        })\r\n        .catch(err=>{\r\n            if(err.response.status===400) toast.error(err.response.data)\r\n            console.log(err)\r\n        })\r\n            \r\n    \r\n\r\n    }\r\n    // const handleDelete= async (slug)=>{\r\n    //     if(window.confirm('Delete?')){\r\n    //         deleteCategory(slug,user.token)\r\n    //         .then((e)=>{\r\n    //             toast.error(`${e.data.name} Deleted succesfully refresh page to see changes`)\r\n    //         })\r\n    //         .catch(err=>{\r\n    //             if(err.response.status===400){\r\n    //                 toast.error(err.response.data)\r\n    //             }\r\n    //         })\r\n    //     }\r\n    // }\r\n   \r\n     \r\n    \r\n        return (\r\n        <div className='container-fluid' >\r\n            <div className='row'>\r\n            <div className='col'>\r\n                    <AdminNav/>\r\n                </div>\r\n                <div className='col-10'  style={\r\n                    {margin: '0px 0px 0px 00px'}\r\n                }>\r\n                   <h3>Parent Category</h3>\r\n                      <select className='form-control' style={{width:'1000px'}} placeholder='Select name of parent category' onChange={(e)=>setcategory(e.target.value)}>\r\n                          <option>Please select</option>\r\n                          {categories.length >0 && categories.map((s)=>(\r\n                              <option key={s._id} value={s._id} selected={s._id===category} >\r\n                                  {s.name}\r\n                              </option>\r\n                          ))}\r\n\r\n                         </select>\r\n                   \r\n                <div className='col'  style={{margin:\"20px 0px 0px 0px\"}}><h3>Update Sub-Category</h3></div>\r\n                  <form onSubmit={handleClick}>\r\n                      <input type=\"text\" \r\n                      className='form-control'\r\n                      \r\n                      value={name}\r\n                      autoFocus\r\n                      required\r\n                      onChange={(e)=>{setname(e.target.value)}}\r\n                      placeholder='Enter name of category'\r\n                      style={{margin:'20px 0px 0px 0px',width:'1000px'}}>\r\n                        \r\n                        \r\n                      </input>\r\n                      <button type='submit' value=\"submit\"className='btn btn-primary' style={{margin:'20px 0px 0px 0px'}}>Save</button>\r\n\r\n                  </form>\r\n                \r\n                 \r\n                </div>\r\n                \r\n                \r\n                \r\n            </div>\r\n            \r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default UpdateSub\r\n\r\n"]},"metadata":{},"sourceType":"module"}