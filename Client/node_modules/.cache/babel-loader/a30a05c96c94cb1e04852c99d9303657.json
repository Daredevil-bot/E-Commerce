{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\asus\\\\ecommerce project\\\\ecommerce\\\\ecommerce-app\\\\server\\\\Client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import React from'react';import Resizer from\"react-image-file-resizer\";import axios from'axios';import{useSelector}from'react-redux';import{Avatar,Badge}from'antd';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FileUpload=function FileUpload(_ref){var values=_ref.values,setValues=_ref.setValues;var _useSelector=useSelector(function(state){return _objectSpread({},state);}),user=_useSelector.user;var fileUploadAndResize=function fileUploadAndResize(e){var files=e.target.files;var allUploadedFiles=values.images;if(files){for(var i=0;i<files.length;i++){Resizer.imageFileResizer(files[i],720,720,'JPEG',100,0,function(uri){axios.post(\"http://localhost:8000/api/uploadimages\",{image:uri},{headers:{authtoken:user?user.token:\"\"}}).then(function(res){console.log('IMAGE UPLOAD RESPONSE DATA',res.data);allUploadedFiles.push(res.data);setValues(_objectSpread(_objectSpread({},values),{},{images:allUploadedFiles}));}).catch(function(err){console.log(err);});},\"base64\");}}};var handleImageRemove=function handleImageRemove(public_id){axios.post(\"http://localhost:8000/api/removeimage\",{public_id:public_id},{headers:{authtoken:user?user.token:''}}).then(function(res){var images=values.images;var filteredImages=images.filter(function(item){return item.public_id!=public_id;});setValues(_objectSpread(_objectSpread({},values),{},{images:filteredImages}));}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"row btn btn-primary\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\" Choose Files\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",multiple:true,accept:\"images/*\",hidden:true,onChange:fileUploadAndResize})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:values.images&&values.images.map(function(image){return/*#__PURE__*/_jsx(Badge,{count:\"X\",onClick:function onClick(){return handleImageRemove(image.public_id);},style:{cursor:\"pointer\"},children:/*#__PURE__*/_jsx(Avatar,{src:image.url,size:120,shape:\"square\",className:\"ml-3\"})},image.public_id);})})]});};export default FileUpload;","map":{"version":3,"sources":["C:/Users/asus/ecommerce project/ecommerce/ecommerce-app/server/client/src/pages/admin/product/FileUpload.js"],"names":["React","Resizer","axios","useSelector","Avatar","Badge","FileUpload","values","setValues","state","user","fileUploadAndResize","e","files","target","allUploadedFiles","images","i","length","imageFileResizer","uri","post","image","headers","authtoken","token","then","res","console","log","data","push","catch","err","handleImageRemove","public_id","filteredImages","filter","item","map","cursor","url"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Resizer from \"react-image-file-resizer\";\r\nimport axios from 'axios'\r\nimport { useSelector } from 'react-redux';\r\nimport {Avatar,Badge} from 'antd';\r\n\r\nconst FileUpload = ({values,setValues}) => {\r\n    const{user}=useSelector((state)=>({...state})) \r\n\r\n    const fileUploadAndResize=(e)=>{\r\n        let files=e.target.files;\r\n        let allUploadedFiles=values.images;\r\n\r\nif(files){\r\n        for(let i=0;i<files.length;i++){\r\n            Resizer.imageFileResizer(\r\n                files[i],\r\n                720,\r\n                720,\r\n                'JPEG',\r\n                100,\r\n                0,\r\n                 (uri)=>{\r\n                   \r\n                    axios.post(`http://localhost:8000/api/uploadimages`,{image:uri},{\r\n                        headers:{\r\n                            authtoken:user?user.token:\"\",\r\n                        },\r\n                    })    \r\n                    .then(res=>{\r\n                        console.log('IMAGE UPLOAD RESPONSE DATA',res.data)\r\n                        allUploadedFiles.push(res.data)\r\n                        setValues({...values,images:allUploadedFiles});\r\n                    })\r\n                    .catch((err)=>{\r\n                        console.log(err)\r\n                    })                  \r\n                },\"base64\"\r\n            );\r\n        }\r\n    }\r\n    };\r\n\r\n    const handleImageRemove=(public_id)=>{\r\n        axios.post(`http://localhost:8000/api/removeimage`,{public_id},{\r\n            headers:{\r\n                authtoken:user?user.token:''\r\n            }\r\n        })\r\n        .then(res=>{\r\n            const{images}=values;\r\n            let filteredImages=images.filter((item)=>{\r\n                return item.public_id!=public_id;\r\n            })\r\n            setValues({...values,images:filteredImages})\r\n        })\r\n        .catch((err)=>{\r\n            console.log(err)\r\n        })\r\n\r\n    }\r\n  return (\r\n      <>\r\n       \r\n    <div className='row btn btn-primary' >\r\n        <label> Choose Files\r\n            <input type='file'\r\n                    multiple\r\n                    accept='images/*'\r\n                    hidden\r\n                    onChange={fileUploadAndResize}\r\n            />\r\n        </label>\r\n    </div>\r\n    <div className='row'>\r\n            {values.images && values.images.map((image)=>(\r\n                <Badge count=\"X\" key={image.public_id} onClick={()=>handleImageRemove(image.public_id)}  \r\n                style={{cursor:\"pointer\" }}>\r\n                    <Avatar  src={image.url} size={120}\r\n                    shape=\"square\"\r\n                    className='ml-3'/>\r\n                </Badge>\r\n            ))}\r\n        </div>\r\n\r\n    </>\r\n  )\r\n};\r\n\r\nexport default FileUpload"]},"metadata":{},"sourceType":"module"}