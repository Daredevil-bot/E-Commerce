{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\asus\\\\ecommerce project\\\\ecommerce\\\\ecommerce-app\\\\server\\\\Client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _objectSpread from\"C:\\\\Users\\\\asus\\\\ecommerce project\\\\ecommerce\\\\ecommerce-app\\\\server\\\\Client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import React from'react';import{useState,useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import{getUserCart,emptyCart,saveAddress}from'../functions/user';import{toast}from'react-toastify';import ReactQuill from'react-quill';import'react-quill/dist/quill.snow.css';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Checkout=function Checkout(){var navigate=useNavigate();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return _objectSpread({},state);}),user=_useSelector.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),total=_useState4[0],setTotal=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),address=_useState6[0],setAddress=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),addressSaved=_useState8[0],setAddressSaved=_useState8[1];useEffect(function(){getUserCart(user.token).then(function(res){console.log('user cart res',JSON.stringify(res.data,null,4));setProducts(res.data.products);setTotal(res.data.cartTotal);});},[]);var empty=function empty(){//\nif(typeof window!=='undefined'){localStorage.removeItem('cart');}dispatch({type:'ADD_TO_CART',payload:[]});emptyCart(user.token).then(function(res){setProducts([]);setTotal(0);toast.success('Cart is empty. Continue Shopping');});};var save=function save(){saveAddress(user.token,address).then(function(res){if(res.data.ok){setAddressSaved(true);toast.success('Address Saved');}});};var place=function place(){navigate('/payment');};return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-6\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Delivery Address\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(ReactQuill,{theme:\"snow\",value:address,onChange:setAddress}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success mt-2\",onClick:save,children:\"Save\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-6\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Order Summary\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Products \",products.length]}),/*#__PURE__*/_jsx(\"hr\",{}),products.map(function(p,i){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[p.product.title,\"  (\",p.color,\") x \",p.count,\"=\",'',p.product.price*p.count]})},i);}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Cart total :\",\"Rs\".concat(total)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary mt-2\",onClick:place,disabled:!addressSaved||!products.length,children:\"Place Order\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsx(\"button\",{disabled:!products.length,onClick:empty,className:\"btn btn-primary\",children:\"Empty Cart\"})})]})]})]})});};export default Checkout;","map":{"version":3,"sources":["C:/Users/asus/ecommerce project/ecommerce/ecommerce-app/server/client/src/pages/Checkout.js"],"names":["React","useState","useEffect","useSelector","useDispatch","getUserCart","emptyCart","saveAddress","toast","ReactQuill","useNavigate","Checkout","navigate","dispatch","state","user","products","setProducts","total","setTotal","address","setAddress","addressSaved","setAddressSaved","token","then","res","console","log","JSON","stringify","data","cartTotal","empty","window","localStorage","removeItem","type","payload","success","save","ok","place","length","map","p","i","product","title","color","count","price"],"mappings":"+UAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,CAAkBC,SAAlB,KAAmC,OAAnC,CACA,OAASC,WAAT,CAAqBC,WAArB,KAAwC,aAAxC,CACA,OAASC,WAAT,CAAqBC,SAArB,CAA+BC,WAA/B,KAAkD,mBAAlD,CACA,OAAQC,KAAR,KAAoB,gBAApB,CACA,MAAOC,CAAAA,UAAP,KAAuB,aAAvB,CACA,MAAO,iCAAP,CACA,OAASC,WAAT,KAA4B,kBAA5B,C,wFAIA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACnB,GAAMC,CAAAA,QAAQ,CAACF,WAAW,EAA1B,CACA,GAAMG,CAAAA,QAAQ,CAACT,WAAW,EAA1B,CACA,iBAAaD,WAAW,CAAC,SAACW,KAAD,0BAAcA,KAAd,GAAD,CAAxB,CAAOC,IAAP,cAAOA,IAAP,CACA,cAA4Bd,QAAQ,CAAC,EAAD,CAApC,wCAAMe,QAAN,eAAeC,WAAf,eACA,eAAsBhB,QAAQ,CAAC,CAAD,CAA9B,yCAAMiB,KAAN,eAAYC,QAAZ,eACA,eAA0BlB,QAAQ,CAAC,EAAD,CAAlC,yCAAMmB,OAAN,eAAcC,UAAd,eACA,eAAoCpB,QAAQ,CAAC,KAAD,CAA5C,yCAAMqB,YAAN,eAAmBC,eAAnB,eAEArB,SAAS,CAAC,UAAI,CACVG,WAAW,CAACU,IAAI,CAACS,KAAN,CAAX,CAAwBC,IAAxB,CAA6B,SAACC,GAAD,CAAO,CAChCC,OAAO,CAACC,GAAR,CAAY,eAAZ,CAA4BC,IAAI,CAACC,SAAL,CAAeJ,GAAG,CAACK,IAAnB,CAAwB,IAAxB,CAA6B,CAA7B,CAA5B,EACAd,WAAW,CAACS,GAAG,CAACK,IAAJ,CAASf,QAAV,CAAX,CACAG,QAAQ,CAACO,GAAG,CAACK,IAAJ,CAASC,SAAV,CAAR,CACH,CAJD,EAKH,CANQ,CAMP,EANO,CAAT,CAQA,GAAMC,CAAAA,KAAK,CAAE,QAAPA,CAAAA,KAAO,EAAM,CACf;AACA,GAAG,MAAOC,CAAAA,MAAP,GAAgB,WAAnB,CAA+B,CAC3BC,YAAY,CAACC,UAAb,CAAwB,MAAxB,EACH,CAEDvB,QAAQ,CAAC,CACLwB,IAAI,CAAC,aADA,CAELC,OAAO,CAAC,EAFH,CAAD,CAAR,CAKAhC,SAAS,CAACS,IAAI,CAACS,KAAN,CAAT,CAAsBC,IAAtB,CAA2B,SAACC,GAAD,CAAO,CAC9BT,WAAW,CAAC,EAAD,CAAX,CACAE,QAAQ,CAAC,CAAD,CAAR,CACAX,KAAK,CAAC+B,OAAN,CAAc,kCAAd,EAEH,CALD,EAMH,CAjBD,CAmBA,GAAMC,CAAAA,IAAI,CAAC,QAALA,CAAAA,IAAK,EAAI,CAEXjC,WAAW,CAACQ,IAAI,CAACS,KAAN,CAAYJ,OAAZ,CAAX,CAAgCK,IAAhC,CAAqC,SAACC,GAAD,CAAO,CACpC,GAAGA,GAAG,CAACK,IAAJ,CAASU,EAAZ,CAAe,CACXlB,eAAe,CAAC,IAAD,CAAf,CACAf,KAAK,CAAC+B,OAAN,CAAc,eAAd,EACH,CACR,CALD,EAOH,CATD,CAUA,GAAMG,CAAAA,KAAK,CAAC,QAANA,CAAAA,KAAM,EAAI,CACZ9B,QAAQ,CAAC,UAAD,CAAR,CACH,CAFD,CAIA,mBACI,YAAK,SAAS,CAAC,iBAAf,uBACI,aAAK,SAAS,CAAC,KAAf,wBAEI,aAAK,SAAS,CAAC,OAAf,wBACI,wCADJ,cAEI,aAFJ,cAGI,aAHJ,cAII,KAAC,UAAD,EAAY,KAAK,CAAC,MAAlB,CAAyB,KAAK,CAAEQ,OAAhC,CAAyC,QAAQ,CAAEC,UAAnD,EAJJ,cAKI,eAAQ,SAAS,CAAC,sBAAlB,CAAyC,OAAO,CAAEmB,IAAlD,kBALJ,cAMI,aANJ,cAQI,aARJ,cASI,aATJ,GAFJ,cAaI,aAAK,SAAS,CAAC,OAAf,wBACI,qCADJ,cAII,aAJJ,cAKI,iCAAaxB,QAAQ,CAAC2B,MAAtB,GALJ,cAMI,aANJ,CAOK3B,QAAQ,CAAC4B,GAAT,CAAa,SAACC,CAAD,CAAGC,CAAH,qBACV,kCACI,qBAAID,CAAC,CAACE,OAAF,CAAUC,KAAd,OAAwBH,CAAC,CAACI,KAA1B,QAAqCJ,CAAC,CAACK,KAAvC,KAA+C,EAA/C,CACCL,CAAC,CAACE,OAAF,CAAUI,KAAV,CAAgBN,CAAC,CAACK,KADnB,GADJ,EAAUJ,CAAV,CADU,EAAb,CAPL,cAaI,aAbJ,cAcI,gDAAqB5B,KAArB,IAdJ,cAgBI,aAAK,SAAS,CAAC,KAAf,wBACI,YAAK,SAAS,CAAC,OAAf,uBACI,eAAQ,SAAS,CAAC,sBAAlB,CAAyC,OAAO,CAAEwB,KAAlD,CAAyD,QAAQ,CAAE,CAACpB,YAAD,EAAiB,CAACN,QAAQ,CAAC2B,MAA9F,yBADJ,EADJ,cAII,YAAK,SAAS,CAAC,OAAf,uBACI,eACA,QAAQ,CAAE,CAAC3B,QAAQ,CAAC2B,MADpB,CAEA,OAAO,CAAEV,KAFT,CAGC,SAAS,CAAC,iBAHX,wBADJ,EAJJ,GAhBJ,GAbJ,GADJ,EADJ,CA8CH,CAhGD,CAkGA,cAAetB,CAAAA,QAAf","sourcesContent":["import React from 'react'\r\nimport { useState,useEffect } from 'react'\r\nimport { useSelector,useDispatch } from 'react-redux'\r\nimport { getUserCart,emptyCart,saveAddress } from '../functions/user'\r\nimport {toast} from 'react-toastify'\r\nimport ReactQuill from 'react-quill'\r\nimport 'react-quill/dist/quill.snow.css'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\n\r\n\r\nconst Checkout = () => {\r\n    const navigate=useNavigate();\r\n    const dispatch=useDispatch()\r\n    const {user}=useSelector((state)=>({...state}))\r\n    const[products,setProducts]=useState([])\r\n    const[total,setTotal]=useState(0)\r\n    const[address,setAddress]=useState('');\r\n    const[addressSaved,setAddressSaved]=useState(false)\r\n\r\n    useEffect(()=>{\r\n        getUserCart(user.token).then((res)=>{\r\n            console.log('user cart res',JSON.stringify(res.data,null,4))\r\n            setProducts(res.data.products)\r\n            setTotal(res.data.cartTotal)\r\n        })\r\n    },[])\r\n\r\n    const empty= () => {\r\n        //\r\n        if(typeof window!=='undefined'){\r\n            localStorage.removeItem('cart')\r\n        }\r\n\r\n        dispatch({\r\n            type:'ADD_TO_CART',\r\n            payload:[]\r\n        });\r\n\r\n        emptyCart(user.token).then((res)=>{\r\n            setProducts([])\r\n            setTotal(0)\r\n            toast.success('Cart is empty. Continue Shopping')\r\n            \r\n        })\r\n    }\r\n\r\n    const save=()=>{\r\n\r\n        saveAddress(user.token,address).then((res)=>{\r\n                if(res.data.ok){\r\n                    setAddressSaved(true)\r\n                    toast.success('Address Saved')\r\n                }\r\n        })\r\n\r\n    }\r\n    const place=()=>{\r\n        navigate('/payment');\r\n    }\r\n\r\n    return (\r\n        <div className='container-fluid'>\r\n            <div className='row'>\r\n                \r\n                <div className='col-6'>\r\n                    <h4>Delivery Address</h4>\r\n                    <br />\r\n                    <br />\r\n                    <ReactQuill theme='snow' value={address} onChange={setAddress} />\r\n                    <button className='btn btn-success mt-2' onClick={save} >Save</button>\r\n                    <hr />\r\n                   \r\n                    <br />\r\n                    <br />\r\n                </div>\r\n                <div className='col-6'>\r\n                    <h4>Order Summary</h4>\r\n                    \r\n                   \r\n                    <hr />\r\n                    <p>Products {products.length}</p>\r\n                    <hr />\r\n                    {products.map((p,i)=>(\r\n                        <div key={i}>\r\n                            <p>{p.product.title}  ({p.color}) x {p.count}={''}\r\n                            {p.product.price*p.count}</p>\r\n                        </div>\r\n                    ))}\r\n                    <hr />\r\n                    <p>Cart total :{`Rs${total}`}</p>\r\n\r\n                    <div className='row'>\r\n                        <div className='col-6'>\r\n                            <button className='btn btn-primary mt-2' onClick={place} disabled={!addressSaved || !products.length}>Place Order</button>\r\n                        </div>\r\n                        <div className='col-6'>\r\n                            <button \r\n                            disabled={!products.length}\r\n                            onClick={empty}\r\n                             className='btn btn-primary'>Empty Cart</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Checkout"]},"metadata":{},"sourceType":"module"}