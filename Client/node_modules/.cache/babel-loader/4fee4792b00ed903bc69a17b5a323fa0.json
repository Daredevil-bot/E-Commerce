{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\asus\\\\ecommerce project\\\\ecommerce\\\\ecommerce-app\\\\src\\\\pages\\\\Shop.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { getProdutByCount, fetchSearchFilter } from '../functions/product';\nimport { useSelector, useDispatch } from 'react-redux';\nimport ProductCard from '../components/cards/ProductCard';\nimport { Menu, Slider, Checkbox } from 'antd';\nimport { DollarOutlined, DownSquareOutlined } from '@ant-design/icons';\nimport { getCategories } from '../functions/category';\nimport { getSubs } from '../functions/sub';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Shop = () => {\n  _s();\n\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [price, setPrice] = useState([0, 0]);\n  const [categories, setCategories] = useState([]);\n  const [categoriesId, setCategoriesId] = useState([]);\n  const [ok, setOk] = useState(false);\n  const [sub, setSub] = useState([]);\n  const {\n    search\n  } = useSelector(state => ({ ...state\n  }));\n  const {\n    text\n  } = search;\n  let dispatch = useDispatch();\n  useEffect(() => {\n    loadProducts();\n    getCategories().then(res => {\n      setCategories(res.data);\n      console.log(res.data);\n    });\n    getSubs().then(res => setSub(res.data));\n  }, []); //    {for search query}\n\n  useEffect(() => {\n    const delayed = setTimeout(() => {\n      fetchProducts({\n        query: text\n      });\n    }, 300);\n    return () => clearTimeout(delayed);\n  }, [text]); //    {default shop page}\n\n  const loadProducts = () => {\n    getProdutByCount(10).then(res => {\n      setLoading(true);\n      setProducts(res.data);\n      console.log(res.data);\n      setLoading(false);\n    });\n  }; //    {universal function for filter search }\n\n\n  const fetchProducts = arg => {\n    fetchSearchFilter(arg).then(res => {\n      setProducts(res.data);\n    });\n  }; //    {for price filtering}\n\n\n  useEffect(() => {\n    fetchProducts({\n      price\n    });\n  }, [ok]);\n\n  const handleSlider = value => {\n    dispatch({\n      type: 'SEARCH_QUERY',\n      payload: {\n        text: ''\n      }\n    });\n    setCategoriesId([]);\n    setPrice(value);\n    setTimeout(() => {\n      setOk(!ok);\n    }, 300);\n  };\n\n  const handleClick = e => {\n    dispatch({\n      type: 'SEARCH_QUERY',\n      payload: {\n        text: ''\n      }\n    });\n    setPrice([0, 0]);\n    let inTheState = [...categoriesId];\n    let justChecked = e.target.value;\n    let foundInTheState = inTheState.indexOf(justChecked);\n\n    if (foundInTheState === -1) {\n      inTheState.push(justChecked);\n    } else {\n      inTheState.splice(foundInTheState, 1);\n    }\n\n    console.log(inTheState);\n    setCategoriesId(inTheState);\n    fetchProducts({\n      category: inTheState\n    });\n  };\n\n  const handleSubmit = e => {};\n\n  const {\n    SubMenu\n  } = Menu;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Search/Filter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Menu, {\n          defaultOpenKeys: ['1', '2'],\n          mode: \"inline\",\n          children: [/*#__PURE__*/_jsxDEV(SubMenu, {\n            title: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"h6\",\n              children: [/*#__PURE__*/_jsxDEV(DollarOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 70\n              }, this), \" Price\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 49\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(Slider, {\n                className: \"ml-4 mr-4\",\n                tipFormatter: v => `Rs${v}`,\n                range: true,\n                value: price,\n                onChange: handleSlider,\n                max: \"150000\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 29\n            }, this)\n          }, '1', false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(SubMenu, {\n            title: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"h6\",\n              children: [/*#__PURE__*/_jsxDEV(DownSquareOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 70\n              }, this), \" Catgories\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 49\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                margin: '10px'\n              },\n              children: categories.map(c => /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                  onChange: handleClick,\n                  className: \"pl-4 pr-4 pb-2 \",\n                  value: c._id,\n                  name: \"category\",\n                  checked: categoriesId.includes(c._id),\n                  children: c.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 41\n                }, this)\n              }, c._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 37\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 29\n            }, this)\n          }, '2', false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(SubMenu, {\n            title: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"h6\",\n              children: [/*#__PURE__*/_jsxDEV(DownSquareOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 70\n              }, this), \" Catgories\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 49\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                margin: '10px'\n              },\n              children: sub.map(s => /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                  onChange: handleSubmit,\n                  className: \"p-1 m-1 \",\n                  value: s._id,\n                  name: \"category\",\n                  children: s.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 41\n                }, this)\n              }, s._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 37\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 29\n            }, this)\n          }, '2', false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-9\",\n        children: [loading ? /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-danger\",\n          children: \"Loading..\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 33\n        }, this) : /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-danger\",\n          children: \"Products\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 80\n        }, this), products.length < 1 && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No Products found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 45\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: products.map(p => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-4 mt-5\",\n            children: /*#__PURE__*/_jsxDEV(ProductCard, {\n              product: p\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 33\n            }, this)\n          }, p._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Shop, \"k9eE/fXmDN5FZnqMZwaq5bxj4jQ=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = Shop;\nexport default Shop;\n\nvar _c;\n\n$RefreshReg$(_c, \"Shop\");","map":{"version":3,"sources":["C:/Users/asus/ecommerce project/ecommerce/ecommerce-app/src/pages/Shop.js"],"names":["React","useState","useEffect","getProdutByCount","fetchSearchFilter","useSelector","useDispatch","ProductCard","Menu","Slider","Checkbox","DollarOutlined","DownSquareOutlined","getCategories","getSubs","Shop","products","setProducts","loading","setLoading","price","setPrice","categories","setCategories","categoriesId","setCategoriesId","ok","setOk","sub","setSub","search","state","text","dispatch","loadProducts","then","res","data","console","log","delayed","setTimeout","fetchProducts","query","clearTimeout","arg","handleSlider","value","type","payload","handleClick","e","inTheState","justChecked","target","foundInTheState","indexOf","push","splice","category","handleSubmit","SubMenu","v","margin","map","c","_id","includes","name","s","length","p"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { getProdutByCount, fetchSearchFilter } from '../functions/product'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport ProductCard from '../components/cards/ProductCard'\r\nimport { Menu, Slider, Checkbox } from 'antd'\r\nimport { DollarOutlined, DownSquareOutlined } from '@ant-design/icons'\r\nimport { getCategories } from '../functions/category'\r\nimport { getSubs } from '../functions/sub'\r\n\r\nconst Shop = () => {\r\n    const [products, setProducts] = useState([])\r\n    const [loading, setLoading] = useState(false)\r\n    const [price, setPrice] = useState([0, 0])\r\n    const [categories, setCategories] = useState([])\r\n    const [categoriesId,setCategoriesId]=useState([])\r\n    const [ok, setOk] = useState(false)\r\n    const[sub,setSub]=useState([])\r\n    const { search } = useSelector((state) => ({ ...state }))\r\n\r\n\r\n    const { text } = search\r\n    let dispatch = useDispatch()\r\n\r\n    useEffect(() => {\r\n        loadProducts()\r\n        getCategories()\r\n            .then(res => {\r\n                setCategories(res.data)\r\n                console.log(res.data)\r\n            })\r\n            getSubs().then(res=>setSub(res.data))\r\n    }, [])\r\n    //    {for search query}\r\n    useEffect(() => {\r\n        const delayed = setTimeout(() => {\r\n            fetchProducts({ query: text })\r\n        }, 300)\r\n        return () => clearTimeout(delayed)\r\n    }, [text])\r\n\r\n    //    {default shop page}\r\n    const loadProducts = () => {\r\n        getProdutByCount(10).then((res) => {\r\n            setLoading(true)\r\n\r\n            setProducts(res.data)\r\n            console.log(res.data)\r\n            setLoading(false)\r\n        })\r\n    }\r\n    //    {universal function for filter search }\r\n    const fetchProducts = (arg) => {\r\n        fetchSearchFilter(arg)\r\n            .then(res => {\r\n                setProducts(res.data)\r\n            })\r\n    }\r\n    //    {for price filtering}\r\n    useEffect(() => {\r\n        fetchProducts({ price });\r\n\r\n    }, [ok])\r\n    const handleSlider = (value) => {\r\n        dispatch({\r\n            type: 'SEARCH_QUERY',\r\n            payload: { text: '' }\r\n        })\r\n        setCategoriesId([])\r\n        setPrice(value)\r\n        setTimeout(() => {\r\n            setOk(!ok)\r\n        }, 300)\r\n    }\r\n    const handleClick=(e)=>{\r\n        dispatch({\r\n            type: 'SEARCH_QUERY',\r\n            payload: { text: '' }\r\n        })\r\n        setPrice([0,0])\r\n\r\n        let inTheState=[...categoriesId]\r\n        let justChecked=e.target.value\r\n        let foundInTheState=inTheState.indexOf(justChecked)\r\n\r\n\r\n        if(foundInTheState===-1){\r\n            inTheState.push(justChecked)\r\n        }\r\n        else{\r\n            inTheState.splice(foundInTheState,1)\r\n        }\r\n\r\n        console.log(inTheState)\r\n        setCategoriesId(inTheState)\r\n        fetchProducts({category:inTheState})\r\n    }\r\n\r\n    const handleSubmit=(e)=>{\r\n\r\n    }\r\n\r\n    const { SubMenu } = Menu\r\n\r\n    return (\r\n        <div className='container-fluid'>\r\n            <div className='row'>\r\n                <div className='col-3'>\r\n                    <h4>Search/Filter</h4>\r\n                    <hr />\r\n                    <Menu defaultOpenKeys={['1', '2']} mode='inline'>\r\n                        <SubMenu key='1' title={<span className='h6'><DollarOutlined /> Price</span>}>\r\n                            <div>\r\n                                <Slider className='ml-4 mr-4'\r\n                                    tipFormatter={(v) => `Rs${v}`}\r\n                                    range\r\n                                    value={price}\r\n                                    onChange={handleSlider}\r\n                                    max='150000'\r\n                                />\r\n                            </div>\r\n                        </SubMenu>\r\n                        <SubMenu key='2' title={<span className='h6'><DownSquareOutlined /> Catgories</span>}>\r\n                            <div style={{ margin: '10px' }}>\r\n                                {categories.map((c) => (\r\n                                    <div key={c._id}>\r\n                                        <Checkbox onChange={handleClick} className='pl-4 pr-4 pb-2 ' value={c._id} name='category' checked={categoriesId.includes(c._id)}>\r\n                                            {c.name}\r\n                                        </Checkbox>\r\n\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </SubMenu>\r\n                        <SubMenu key='2' title={<span className='h6'><DownSquareOutlined /> Catgories</span>}>\r\n                            <div style={{ margin: '10px' }}>\r\n                                {sub.map((s) => (\r\n                                    <div key={s._id}>\r\n                                        <Checkbox onChange={handleSubmit} className='p-1 m-1 ' value={s._id} name='category' >\r\n                                            {s.name}\r\n                                        </Checkbox>\r\n\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </SubMenu>\r\n                    </Menu>\r\n\r\n                </div>\r\n                <div className='col-9'>\r\n                    {loading ? (<h4 className='text-danger'>Loading..</h4>) : (<h4 className='text-danger'>Products</h4>)}\r\n\r\n                    {products.length < 1 && <p>No Products found</p>}\r\n\r\n                    <div className='row'>\r\n                        {products.map((p) => (\r\n                            <div key={p._id} className='col-4 mt-5'>\r\n                                <ProductCard product={p} />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Shop"]},"metadata":{},"sourceType":"module"}