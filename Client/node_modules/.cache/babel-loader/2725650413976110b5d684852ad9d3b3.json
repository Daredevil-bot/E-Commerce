{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\asus\\\\ecommerce project\\\\ecommerce\\\\ecommerce-app\\\\server\\\\Client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\asus\\\\ecommerce project\\\\ecommerce\\\\ecommerce-app\\\\server\\\\Client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _objectSpread from\"C:\\\\Users\\\\asus\\\\ecommerce project\\\\ecommerce\\\\ecommerce-app\\\\server\\\\Client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\asus\\\\ecommerce project\\\\ecommerce\\\\ecommerce-app\\\\server\\\\Client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React from'react';import{useEffect,useState}from'react';import{useParams}from'react-router-dom';import{getProduct,getRelated,productStar}from'../functions/product';import SingleProduct from'../components/cards/SingleProduct';import{useSelector}from'react-redux';import ProductCard from'../components/cards/ProductCard';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Product=function Product(){var _useSelector=useSelector(function(state){return _objectSpread({},state);}),user=_useSelector.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),related=_useState4[0],setRelated=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),star=_useState6[0],setStar=_useState6[1];var params=useParams();useEffect(function(){loadProduct();},[]);// useEffect(()=>{\n//   if(product.ratings && user){\n//     let existingRatingObject=\n//     product.ratings.find((ele)=>(ele.postedBy.toString()===user._id.toString()))\n//     existingRatingObject && setStar(existingRatingObject.star); \n//   }\n//         //to show current users star here's the code\n// })\nvar loadProduct=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:getProduct(params.slug).then(function(res){setProduct(res.data);console.log(res.data);getRelated(res.data._id).then(function(res){setRelated(res.data);console.log(res.data);});});case 1:case\"end\":return _context.stop();}}},_callee);}));return function loadProduct(){return _ref.apply(this,arguments);};}();var onStarClick=function onStarClick(newRating,name){setStar(newRating);productStar(name,newRating,user.token).then(function(res){console.log(res.data);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row pt-4\",children:/*#__PURE__*/_jsx(SingleProduct,{product:product,onStarClick:onStarClick,star:star})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col text-center pt-5 pb-5\",children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h4\",{children:\"Related Products\"}),/*#__PURE__*/_jsx(\"hr\",{})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:related.length?related.map(function(r){return/*#__PURE__*/_jsxs(\"div\",{className:\"col-4\",children:[\" \",/*#__PURE__*/_jsx(ProductCard,{product:r}),\" \"]},r._id);}):/*#__PURE__*/_jsx(\"div\",{children:\" No Product\"})})})]});};export default Product;","map":{"version":3,"sources":["C:/Users/asus/ecommerce project/ecommerce/ecommerce-app/server/client/src/pages/Product.js"],"names":["React","useEffect","useState","useParams","getProduct","getRelated","productStar","SingleProduct","useSelector","ProductCard","Product","state","user","product","setProduct","related","setRelated","star","setStar","params","loadProduct","slug","then","res","data","console","log","_id","onStarClick","newRating","name","token","length","map","r"],"mappings":"iqBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,CAAmBC,QAAnB,KAAmC,OAAnC,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,OAASC,UAAT,CAAqBC,UAArB,CAAgCC,WAAhC,KAAkD,sBAAlD,CACA,MAAOC,CAAAA,aAAP,KAA0B,mCAA1B,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,MAAOC,CAAAA,WAAP,KAAwB,iCAAxB,C,wFACA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpB,iBAAYF,WAAW,CAAC,SAACG,KAAD,0BAAcA,KAAd,GAAD,CAAvB,CAAMC,IAAN,cAAMA,IAAN,CAEE,cAA0BV,QAAQ,CAAC,EAAD,CAAlC,wCAAMW,OAAN,eAAcC,UAAd,eACA,eAA0BZ,QAAQ,CAAC,EAAD,CAAlC,yCAAMa,OAAN,eAAcC,UAAd,eACA,eAAoBd,QAAQ,CAAC,CAAD,CAA5B,yCAAMe,IAAN,eAAWC,OAAX,eACA,GAAIC,CAAAA,MAAM,CAAChB,SAAS,EAApB,CACAF,SAAS,CAAC,UAAI,CACVmB,WAAW,GACd,CAFQ,CAEP,EAFO,CAAT,CAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA,GAAMA,CAAAA,WAAW,0FAAE,mIACfhB,UAAU,CAACe,MAAM,CAACE,IAAR,CAAV,CAAwBC,IAAxB,CAA6B,SAAAC,GAAG,CAAE,CAC9BT,UAAU,CAACS,GAAG,CAACC,IAAL,CAAV,CACAC,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACC,IAAhB,EACCnB,UAAU,CAACkB,GAAG,CAACC,IAAJ,CAASG,GAAV,CAAV,CAAyBL,IAAzB,CAA8B,SAAAC,GAAG,CAAE,CAACP,UAAU,CAACO,GAAG,CAACC,IAAL,CAAV,CACrCC,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACC,IAAhB,EAAsB,CADrB,EAEJ,CALD,EADe,sDAAF,kBAAXJ,CAAAA,WAAW,0CAAjB,CASA,GAAMQ,CAAAA,WAAW,CAAC,QAAZA,CAAAA,WAAY,CAACC,SAAD,CAAWC,IAAX,CAAkB,CAClCZ,OAAO,CAACW,SAAD,CAAP,CACAvB,WAAW,CAACwB,IAAD,CAAMD,SAAN,CAAgBjB,IAAI,CAACmB,KAArB,CAAX,CACCT,IADD,CACM,SAAAC,GAAG,CAAE,CACTE,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACC,IAAhB,EACD,CAHD,EAMD,CARD,CASF,mBACI,aAAK,SAAS,CAAC,iBAAf,wBACI,YAAK,SAAS,CAAC,UAAf,uBACE,KAAC,aAAD,EAAe,OAAO,CAAEX,OAAxB,CAAiC,WAAW,CAAEe,WAA9C,CAA2D,IAAI,CAAEX,IAAjE,EADF,EADJ,cAII,YAAK,SAAS,CAAC,KAAf,uBACE,aAAK,SAAS,CAAC,2BAAf,wBACE,aADF,cAEE,wCAFF,cAKE,aALF,GADF,EAJJ,cAaI,YAAK,SAAS,CAAC,WAAf,uBACE,YAAK,SAAS,CAAC,KAAf,UACCF,OAAO,CAACiB,MAAR,CAAkBjB,OAAO,CAACkB,GAAR,CAAY,SAACC,CAAD,qBAC7B,aAAiB,SAAS,CAAC,OAA3B,4BAAoC,KAAC,WAAD,EAAa,OAAO,CAAEA,CAAtB,EAApC,OAAUA,CAAC,CAACP,GAAZ,CAD6B,EAAZ,CAAlB,cAEI,oCAHL,EADF,EAbJ,GADJ,CAyBD,CA9DD,CAgEA,cAAejB,CAAAA,OAAf","sourcesContent":["import React from 'react'\r\nimport { useEffect,useState } from 'react'\r\nimport { useParams } from 'react-router-dom'\r\nimport { getProduct ,getRelated,productStar} from '../functions/product'\r\nimport SingleProduct from '../components/cards/SingleProduct'\r\nimport { useSelector } from 'react-redux'\r\nimport ProductCard from '../components/cards/ProductCard'\r\nconst Product = () => {\r\n  const{user}=useSelector((state)=>({...state}))\r\n\r\n    const[product,setProduct]=useState([])\r\n    const[related,setRelated]=useState([])\r\n    const[star,setStar]=useState(0)\r\n    let params=useParams()\r\n    useEffect(()=>{\r\n        loadProduct()\r\n    },[])\r\n    // useEffect(()=>{\r\n    //   if(product.ratings && user){\r\n    //     let existingRatingObject=\r\n    //     product.ratings.find((ele)=>(ele.postedBy.toString()===user._id.toString()))\r\n    //     existingRatingObject && setStar(existingRatingObject.star); \r\n    //   }\r\n    //         //to show current users star here's the code\r\n\r\n    // })\r\n    const loadProduct= async ()=>{\r\n        getProduct(params.slug).then(res=>{\r\n            setProduct(res.data)\r\n            console.log(res.data)\r\n             getRelated(res.data._id).then(res=>{setRelated(res.data)\r\n            console.log(res.data)})\r\n        })\r\n        \r\n    }\r\n    const onStarClick=(newRating,name)=>{\r\n      setStar(newRating)\r\n      productStar(name,newRating,user.token)\r\n      .then(res=>{\r\n        console.log(res.data)\r\n      })\r\n\r\n\r\n    }\r\n  return (\r\n      <div className='container-fluid'>\r\n          <div className='row pt-4'>\r\n            <SingleProduct product={product} onStarClick={onStarClick} star={star}/>\r\n          </div>\r\n          <div className='row'>\r\n            <div className='col text-center pt-5 pb-5'>\r\n              <hr/>\r\n              <h4>Related Products</h4>\r\n              \r\n              \r\n              <hr/>\r\n            </div>\r\n          </div>\r\n          <div className='container' >\r\n            <div className='row'>\r\n            {related.length ? (related.map((r)=>(\r\n              <div key={r._id} className=\"col-4\"> <ProductCard product={r}/> </div>\r\n            ))):(<div> No Product</div>)}\r\n          </div>\r\n          </div>\r\n\r\n      </div>\r\n      \r\n  );\r\n}\r\n\r\nexport default Product"]},"metadata":{},"sourceType":"module"}